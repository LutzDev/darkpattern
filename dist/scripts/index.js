!function(){"use strict";var t="top",e="bottom",n="right",r="left",i="auto",o=[t,e,n,r],s="start",u="end",a="viewport",c="popper",f=o.reduce((function(t,e){return t.concat([e+"-"+s,e+"-"+u])}),[]),h=[].concat(o,[i]).reduce((function(t,e){return t.concat([e,e+"-"+s,e+"-"+u])}),[]),l=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function p(t){return t?(t.nodeName||"").toLowerCase():null}function d(t){if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function v(t){return t instanceof d(t).Element||t instanceof Element}function y(t){return t instanceof d(t).HTMLElement||t instanceof HTMLElement}function m(t){return t.split("-")[0]}function g(t){return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}function b(t,e){var n,r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&((n=r)instanceof d(n).ShadowRoot||n instanceof ShadowRoot)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function w(t){return d(t).getComputedStyle(t)}function _(t){return["table","td","th"].indexOf(p(t))>=0}function E(t){return((v(t)?t.ownerDocument:t.document)||window.document).documentElement}function I(t){return"html"===p(t)?t:t.assignedSlot||t.parentNode||t.host||E(t)}function T(t){if(!y(t)||"fixed"===w(t).position)return null;var e=t.offsetParent;if(e){var n=E(e);if("body"===p(e)&&"static"===w(e).position&&"static"!==w(n).position)return n}return e}function A(t){for(var e=d(t),n=T(t);n&&_(n)&&"static"===w(n).position;)n=T(n);return n&&"body"===p(n)&&"static"===w(n).position?e:n||function(t){for(var e=I(t);y(e)&&["html","body"].indexOf(p(e))<0;){var n=w(e);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return e;e=e.parentNode}return null}(t)||e}function x(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function N(t,e,n){return Math.max(t,Math.min(e,n))}function O(t){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),t)}function S(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var D={top:"auto",right:"auto",bottom:"auto",left:"auto"};function k(i){var o,s=i.popper,u=i.popperRect,a=i.placement,c=i.offsets,f=i.position,h=i.gpuAcceleration,l=i.adaptive,p=i.roundOffsets?function(t){var e=t.x,n=t.y,r=window.devicePixelRatio||1;return{x:Math.round(e*r)/r||0,y:Math.round(n*r)/r||0}}(c):c,v=p.x,y=void 0===v?0:v,m=p.y,g=void 0===m?0:m,b=c.hasOwnProperty("x"),w=c.hasOwnProperty("y"),_=r,I=t,T=window;if(l){var x=A(s);x===d(s)&&(x=E(s)),a===t&&(I=e,g-=x.clientHeight-u.height,g*=h?1:-1),a===r&&(_=n,y-=x.clientWidth-u.width,y*=h?1:-1)}var N,O=Object.assign({position:f},l&&D);return h?Object.assign(Object.assign({},O),{},((N={})[I]=w?"0":"",N[_]=b?"0":"",N.transform=(T.devicePixelRatio||1)<2?"translate("+y+"px, "+g+"px)":"translate3d("+y+"px, "+g+"px, 0)",N)):Object.assign(Object.assign({},O),{},((o={})[I]=w?g+"px":"",o[_]=b?y+"px":"",o.transform="",o))}var P={passive:!0};var C={left:"right",right:"left",bottom:"top",top:"bottom"};function L(t){return t.replace(/left|right|bottom|top/g,(function(t){return C[t]}))}var R={start:"end",end:"start"};function V(t){return t.replace(/start|end/g,(function(t){return R[t]}))}function j(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function M(t){var e=d(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function U(t){return j(E(t)).left+M(t).scrollLeft}function F(t){var e=w(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function q(t){return["html","body","#document"].indexOf(p(t))>=0?t.ownerDocument.body:y(t)&&F(t)?t:q(I(t))}function B(t,e){void 0===e&&(e=[]);var n=q(t),r="body"===p(n),i=d(n),o=r?[i].concat(i.visualViewport||[],F(n)?n:[]):n,s=e.concat(o);return r?s:s.concat(B(I(o)))}function z(t){return Object.assign(Object.assign({},t),{},{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function G(t,e){return e===a?z(function(t){var e=d(t),n=E(t),r=e.visualViewport,i=n.clientWidth,o=n.clientHeight,s=0,u=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,u=r.offsetTop)),{width:i,height:o,x:s+U(t),y:u}}(t)):y(e)?function(t){var e=j(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):z(function(t){var e=E(t),n=M(t),r=t.ownerDocument.body,i=Math.max(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Math.max(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-n.scrollLeft+U(t),u=-n.scrollTop;return"rtl"===w(r||e).direction&&(s+=Math.max(e.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:s,y:u}}(E(t)))}function H(t,e,n){var r="clippingParents"===e?function(t){var e=B(I(t)),n=["absolute","fixed"].indexOf(w(t).position)>=0&&y(t)?A(t):t;return v(n)?e.filter((function(t){return v(t)&&b(t,n)&&"body"!==p(t)})):[]}(t):[].concat(e),i=[].concat(r,[n]),o=i[0],s=i.reduce((function(e,n){var r=G(t,n);return e.top=Math.max(r.top,e.top),e.right=Math.min(r.right,e.right),e.bottom=Math.min(r.bottom,e.bottom),e.left=Math.max(r.left,e.left),e}),G(t,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Y(t){return t.split("-")[1]}function K(i){var o,a=i.reference,c=i.element,f=i.placement,h=f?m(f):null,l=f?Y(f):null,p=a.x+a.width/2-c.width/2,d=a.y+a.height/2-c.height/2;switch(h){case t:o={x:p,y:a.y-c.height};break;case e:o={x:p,y:a.y+a.height};break;case n:o={x:a.x+a.width,y:d};break;case r:o={x:a.x-c.width,y:d};break;default:o={x:a.x,y:a.y}}var v=h?x(h):null;if(null!=v){var y="y"===v?"height":"width";switch(l){case s:o[v]=o[v]-(a[y]/2-c[y]/2);break;case u:o[v]=o[v]+(a[y]/2-c[y]/2)}}return o}function Q(r,i){void 0===i&&(i={});var s=i,u=s.placement,f=void 0===u?r.placement:u,h=s.boundary,l=void 0===h?"clippingParents":h,p=s.rootBoundary,d=void 0===p?a:p,y=s.elementContext,m=void 0===y?c:y,g=s.altBoundary,b=void 0!==g&&g,w=s.padding,_=void 0===w?0:w,I=O("number"!=typeof _?_:S(_,o)),T=m===c?"reference":c,A=r.elements.reference,x=r.rects.popper,N=r.elements[b?T:m],D=H(v(N)?N:N.contextElement||E(r.elements.popper),l,d),k=j(A),P=K({reference:k,element:x,strategy:"absolute",placement:f}),C=z(Object.assign(Object.assign({},x),P)),L=m===c?C:k,R={top:D.top-L.top+I.top,bottom:L.bottom-D.bottom+I.bottom,left:D.left-L.left+I.left,right:L.right-D.right+I.right},V=r.modifiersData.offset;if(m===c&&V){var M=V[f];Object.keys(R).forEach((function(r){var i=[n,e].indexOf(r)>=0?1:-1,o=[t,e].indexOf(r)>=0?"y":"x";R[r]+=M[o]*i}))}return R}function X(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,u=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?h:c,p=Y(r),d=p?a?f:f.filter((function(t){return Y(t)===p})):o,v=d.filter((function(t){return l.indexOf(t)>=0}));0===v.length&&(v=d);var y=v.reduce((function(e,n){return e[n]=Q(t,{placement:n,boundary:i,rootBoundary:s,padding:u})[m(n)],e}),{});return Object.keys(y).sort((function(t,e){return y[t]-y[e]}))}function W(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function J(i){return[t,n,e,r].some((function(t){return i[t]>=0}))}function $(t,e,n){void 0===n&&(n=!1);var r,i,o=E(e),s=j(t),u=y(e),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(u||!u&&!n)&&(("body"!==p(e)||F(o))&&(a=(r=e)!==d(r)&&y(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:M(r)),y(e)?((c=j(e)).x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=U(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function Z(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function tt(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var et={placement:"bottom",modifiers:[],strategy:"absolute"};function nt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function rt(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?et:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},et),o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],u=!1,a={state:i,setOptions:function(n){c(),i.options=Object.assign(Object.assign(Object.assign({},o),i.options),n),i.scrollParents={reference:v(t)?B(t):t.contextElement?B(t.contextElement):[],popper:B(e)};var u,f,h=function(t){var e=Z(t);return l.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((u=[].concat(r,i.options.modifiers),f=u.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign(Object.assign(Object.assign({},n),e),{},{options:Object.assign(Object.assign({},n.options),e.options),data:Object.assign(Object.assign({},n.data),e.data)}):e,t}),{}),Object.keys(f).map((function(t){return f[t]}))));return i.orderedModifiers=h.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"==typeof o){var u=o({state:i,name:e,instance:a,options:r}),c=function(){};s.push(u||c)}})),a.update()},forceUpdate:function(){if(!u){var t=i.elements,e=t.reference,n=t.popper;if(nt(e,n)){i.rects={reference:$(e,A(n),"fixed"===i.options.strategy),popper:g(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,f=void 0===c?{}:c,h=o.name;"function"==typeof s&&(i=s({state:i,options:f,name:h,instance:a})||i)}else i.reset=!1,r=-1}}},update:tt((function(){return new Promise((function(t){a.forceUpdate(),t(i)}))})),destroy:function(){c(),u=!0}};if(!nt(t,e))return a;function c(){s.forEach((function(t){return t()})),s=[]}return a.setOptions(n).then((function(t){!u&&n.onFirstUpdate&&n.onFirstUpdate(t)})),a}}var it=rt({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,s=r.resize,u=void 0===s||s,a=d(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,P)})),u&&a.addEventListener("resize",n.update,P),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,P)})),u&&a.removeEventListener("resize",n.update,P)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=K({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,u=n.roundOffsets,a=void 0===u||u,c={placement:m(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign(Object.assign({},e.styles.popper),k(Object.assign(Object.assign({},c),{},{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:a})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign(Object.assign({},e.styles.arrow),k(Object.assign(Object.assign({},c),{},{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];y(i)&&p(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});y(r)&&p(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var i=e.state,o=e.options,s=e.name,u=o.offset,a=void 0===u?[0,0]:u,c=h.reduce((function(e,o){return e[o]=function(e,i,o){var s=m(e),u=[r,t].indexOf(s)>=0?-1:1,a="function"==typeof o?o(Object.assign(Object.assign({},i),{},{placement:e})):o,c=a[0],f=a[1];return c=c||0,f=(f||0)*u,[r,n].indexOf(s)>=0?{x:f,y:c}:{x:c,y:f}}(o,i.rects,a),e}),{}),f=c[i.placement],l=f.x,p=f.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=l,i.modifiersData.popperOffsets.y+=p),i.modifiersData[s]=c}},{name:"flip",enabled:!0,phase:"main",fn:function(o){var u=o.state,a=o.options,c=o.name;if(!u.modifiersData[c]._skip){for(var f=a.mainAxis,h=void 0===f||f,l=a.altAxis,p=void 0===l||l,d=a.fallbackPlacements,v=a.padding,y=a.boundary,g=a.rootBoundary,b=a.altBoundary,w=a.flipVariations,_=void 0===w||w,E=a.allowedAutoPlacements,I=u.options.placement,T=m(I),A=d||(T===I||!_?[L(I)]:function(t){if(m(t)===i)return[];var e=L(t);return[V(t),e,V(e)]}(I)),x=[I].concat(A).reduce((function(t,e){return t.concat(m(e)===i?X(u,{placement:e,boundary:y,rootBoundary:g,padding:v,flipVariations:_,allowedAutoPlacements:E}):e)}),[]),N=u.rects.reference,O=u.rects.popper,S=new Map,D=!0,k=x[0],P=0;P<x.length;P++){var C=x[P],R=m(C),j=Y(C)===s,M=[t,e].indexOf(R)>=0,U=M?"width":"height",F=Q(u,{placement:C,boundary:y,rootBoundary:g,altBoundary:b,padding:v}),q=M?j?n:r:j?e:t;N[U]>O[U]&&(q=L(q));var B=L(q),z=[];if(h&&z.push(F[R]<=0),p&&z.push(F[q]<=0,F[B]<=0),z.every((function(t){return t}))){k=C,D=!1;break}S.set(C,z)}if(D)for(var G=function(t){var e=x.find((function(e){var n=S.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return k=e,"break"},H=_?3:1;H>0;H--){if("break"===G(H))break}u.placement!==k&&(u.modifiersData[c]._skip=!0,u.placement=k,u.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(i){var o=i.state,u=i.options,a=i.name,c=u.mainAxis,f=void 0===c||c,h=u.altAxis,l=void 0!==h&&h,p=u.boundary,d=u.rootBoundary,v=u.altBoundary,y=u.padding,b=u.tether,w=void 0===b||b,_=u.tetherOffset,E=void 0===_?0:_,I=Q(o,{boundary:p,rootBoundary:d,padding:y,altBoundary:v}),T=m(o.placement),O=Y(o.placement),S=!O,D=x(T),k="x"===D?"y":"x",P=o.modifiersData.popperOffsets,C=o.rects.reference,L=o.rects.popper,R="function"==typeof E?E(Object.assign(Object.assign({},o.rects),{},{placement:o.placement})):E,V={x:0,y:0};if(P){if(f){var j="y"===D?t:r,M="y"===D?e:n,U="y"===D?"height":"width",F=P[D],q=P[D]+I[j],B=P[D]-I[M],z=w?-L[U]/2:0,G=O===s?C[U]:L[U],H=O===s?-L[U]:-C[U],K=o.elements.arrow,X=w&&K?g(K):{width:0,height:0},W=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},J=W[j],$=W[M],Z=N(0,C[U],X[U]),tt=S?C[U]/2-z-Z-J-R:G-Z-J-R,et=S?-C[U]/2+z+Z+$+R:H+Z+$+R,nt=o.elements.arrow&&A(o.elements.arrow),rt=nt?"y"===D?nt.clientTop||0:nt.clientLeft||0:0,it=o.modifiersData.offset?o.modifiersData.offset[o.placement][D]:0,ot=P[D]+tt-it-rt,st=P[D]+et-it,ut=N(w?Math.min(q,ot):q,F,w?Math.max(B,st):B);P[D]=ut,V[D]=ut-F}if(l){var at="x"===D?t:r,ct="x"===D?e:n,ft=P[k],ht=N(ft+I[at],ft,ft-I[ct]);P[k]=ht,V[k]=ht-ft}o.modifiersData[a]=V}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(i){var o,s=i.state,u=i.name,a=s.elements.arrow,c=s.modifiersData.popperOffsets,f=m(s.placement),h=x(f),l=[r,n].indexOf(f)>=0?"height":"width";if(a&&c){var p=s.modifiersData[u+"#persistent"].padding,d=g(a),v="y"===h?t:r,y="y"===h?e:n,b=s.rects.reference[l]+s.rects.reference[h]-c[h]-s.rects.popper[l],w=c[h]-s.rects.reference[h],_=A(a),E=_?"y"===h?_.clientHeight||0:_.clientWidth||0:0,I=b/2-w/2,T=p[v],O=E-d[l]-p[y],S=E/2-d[l]/2+I,D=N(T,S,O),k=h;s.modifiersData[u]=((o={})[k]=D,o.centerOffset=D-S,o)}},effect:function(t){var e=t.state,n=t.options,r=t.name,i=n.element,s=void 0===i?"[data-popper-arrow]":i,u=n.padding,a=void 0===u?0:u;null!=s&&("string"!=typeof s||(s=e.elements.popper.querySelector(s)))&&b(e.elements.popper,s)&&(e.elements.arrow=s,e.modifiersData[r+"#persistent"]={padding:O("number"!=typeof a?a:S(a,o))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Q(e,{elementContext:"reference"}),u=Q(e,{altBoundary:!0}),a=W(s,r),c=W(u,i,o),f=J(a),h=J(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:f,hasPopperEscaped:h},e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-reference-hidden":f,"data-popper-escaped":h})}}]}),ot="tippy-content",st="tippy-arrow",ut="tippy-svg-arrow",at={passive:!0,capture:!0};function ct(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function ft(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function ht(t,e){return"function"==typeof t?t.apply(void 0,e):t}function lt(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function pt(t){return[].concat(t)}function dt(t,e){-1===t.indexOf(e)&&t.push(e)}function vt(t){return[].slice.call(t)}function yt(){return document.createElement("div")}function mt(t){return["Element","Fragment"].some((function(e){return ft(t,e)}))}function gt(t){return mt(t)?[t]:function(t){return ft(t,"NodeList")}(t)?vt(t):Array.isArray(t)?t:vt(document.querySelectorAll(t))}function bt(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function wt(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function _t(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}var Et={isTouch:!1},It=0;function Tt(){Et.isTouch||(Et.isTouch=!0,window.performance&&document.addEventListener("mousemove",At))}function At(){var t=performance.now();t-It<20&&(Et.isTouch=!1,document.removeEventListener("mousemove",At)),It=t}function xt(){var t,e=document.activeElement;if((t=e)&&t._tippy&&t._tippy.reference===t){var n=e._tippy;e.blur&&!n.state.isVisible&&e.blur()}}var Nt="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",Ot=/MSIE |Trident\//.test(Nt),St=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Dt=Object.keys(St);function kt(t){var e=(t.plugins||[]).reduce((function(e,n){var r=n.name,i=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:i),e}),{});return Object.assign({},t,{},e)}function Pt(t,e){var n=Object.assign({},e,{content:ht(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(kt(Object.assign({},St,{plugins:e}))):Dt).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(t){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},St.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function Ct(t,e){t.innerHTML=e}function Lt(t){var e=yt();return!0===t?e.className=st:(e.className=ut,mt(t)?e.appendChild(t):Ct(e,t)),e}function Rt(t,e){mt(e.content)?(Ct(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Ct(t,e.content):t.textContent=e.content)}function Vt(t){var e=t.firstElementChild,n=vt(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(ot)})),arrow:n.find((function(t){return t.classList.contains(st)||t.classList.contains(ut)})),backdrop:n.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function jt(t){var e=yt(),n=yt();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=yt();function i(n,r){var i=Vt(e),o=i.box,s=i.content,u=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||Rt(s,t.props),r.arrow?u?n.arrow!==r.arrow&&(o.removeChild(u),o.appendChild(Lt(r.arrow))):o.appendChild(Lt(r.arrow)):u&&o.removeChild(u)}return r.className=ot,r.setAttribute("data-state","hidden"),Rt(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}jt.$$tippy=!0;var Mt=1,Ut=[],Ft=[];function qt(t,e){var n,r,i,o,s,u,a,c,f,h=Pt(t,Object.assign({},St,{},kt((n=e,Object.keys(n).reduce((function(t,e){return void 0!==n[e]&&(t[e]=n[e]),t}),{}))))),l=!1,p=!1,d=!1,v=!1,y=[],m=lt(Q,h.interactiveDebounce),g=Mt++,b=(f=h.plugins).filter((function(t,e){return f.indexOf(t)===e})),w={id:g,reference:t,popper:yt(),popperInstance:null,props:h,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:b,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)},setProps:function(e){if(w.state.isDestroyed)return;L("onBeforeUpdate",[w,e]),Y();var n=w.props,r=Pt(t,Object.assign({},w.props,{},e,{ignoreAttributes:!0}));w.props=r,H(),n.interactiveDebounce!==r.interactiveDebounce&&(j(),m=lt(Q,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?pt(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded");V(),C(),I&&I(n,r);w.popperInstance&&($(),tt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));L("onAfterUpdate",[w,e])},setContent:function(t){w.setProps({content:t})},show:function(){var t=w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=Et.isTouch&&!w.props.touch,i=ct(w.props.duration,0,St.duration);if(t||e||n||r)return;if(S().hasAttribute("disabled"))return;if(L("onShow",[w],!1),!1===w.props.onShow(w))return;w.state.isVisible=!0,O()&&(E.style.visibility="visible");C(),q(),w.state.isMounted||(E.style.transition="none");if(O()){var o=k(),s=o.box,u=o.content;bt([s,u],0)}a=function(){if(w.state.isVisible&&!v){if(v=!0,E.offsetHeight,E.style.transition=w.props.moveTransition,O()&&w.props.animation){var t=k(),e=t.box,n=t.content;bt([e,n],i),wt([e,n],"visible")}R(),V(),dt(Ft,w),w.state.isMounted=!0,L("onMount",[w]),w.props.animation&&O()&&function(t,e){z(t,e)}(i,(function(){w.state.isShown=!0,L("onShown",[w])}))}},function(){var t,e=w.props.appendTo,n=S();t=w.props.interactive&&e===St.appendTo||"parent"===e?n.parentNode:ht(e,[n]);t.contains(E)||t.appendChild(E);$()}()},hide:function(){var t=!w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=ct(w.props.duration,1,St.duration);if(t||e||n)return;if(L("onHide",[w],!1),!1===w.props.onHide(w))return;w.state.isVisible=!1,w.state.isShown=!1,v=!1,l=!1,O()&&(E.style.visibility="hidden");if(j(),B(),C(),O()){var i=k(),o=i.box,s=i.content;w.props.animation&&(bt([o,s],r),wt([o,s],"hidden"))}R(),V(),w.props.animation?O()&&function(t,e){z(t,(function(){!w.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&e()}))}(r,w.unmount):w.unmount()},hideWithInteractivity:function(t){D().addEventListener("mousemove",m),dt(Ut,m),m(t)},enable:function(){w.state.isEnabled=!0},disable:function(){w.hide(),w.state.isEnabled=!1},unmount:function(){w.state.isVisible&&w.hide();if(!w.state.isMounted)return;Z(),tt().forEach((function(t){t._tippy.unmount()})),E.parentNode&&E.parentNode.removeChild(E);Ft=Ft.filter((function(t){return t!==w})),w.state.isMounted=!1,L("onHidden",[w])},destroy:function(){if(w.state.isDestroyed)return;w.clearDelayTimeouts(),w.unmount(),Y(),delete t._tippy,w.state.isDestroyed=!0,L("onDestroy",[w])}};if(!h.render)return w;var _=h.render(w),E=_.popper,I=_.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+w.id,w.popper=E,t._tippy=w,E._tippy=w;var T=b.map((function(t){return t.fn(w)})),A=t.hasAttribute("aria-expanded");return H(),V(),C(),L("onCreate",[w]),h.showOnCreate&&et(),E.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),E.addEventListener("mouseleave",(function(t){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(D().addEventListener("mousemove",m),m(t))})),w;function x(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function N(){return"hold"===x()[0]}function O(){var t;return!!(null==(t=w.props.render)?void 0:t.$$tippy)}function S(){return c||t}function D(){var t,e=S().parentNode;return e?(t=pt(e)[0])&&t.ownerDocument||document:document}function k(){return Vt(E)}function P(t){return w.state.isMounted&&!w.state.isVisible||Et.isTouch||s&&"focus"===s.type?0:ct(w.props.delay,t?0:1,St.delay)}function C(){E.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",E.style.zIndex=""+w.props.zIndex}function L(t,e,n){var r;(void 0===n&&(n=!0),T.forEach((function(n){n[t]&&n[t].apply(void 0,e)})),n)&&(r=w.props)[t].apply(r,e)}function R(){var e=w.props.aria;if(e.content){var n="aria-"+e.content,r=E.id;pt(w.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(w.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function V(){!A&&w.props.aria.expanded&&pt(w.props.triggerTarget||t).forEach((function(t){w.props.interactive?t.setAttribute("aria-expanded",w.state.isVisible&&t===S()?"true":"false"):t.removeAttribute("aria-expanded")}))}function j(){D().removeEventListener("mousemove",m),Ut=Ut.filter((function(t){return t!==m}))}function M(t){if(!(Et.isTouch&&(d||"mousedown"===t.type)||w.props.interactive&&E.contains(t.target))){if(S().contains(t.target)){if(Et.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[w,t]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),p=!0,setTimeout((function(){p=!1})),w.state.isMounted||B())}}function U(){d=!0}function F(){d=!1}function q(){var t=D();t.addEventListener("mousedown",M,!0),t.addEventListener("touchend",M,at),t.addEventListener("touchstart",F,at),t.addEventListener("touchmove",U,at)}function B(){var t=D();t.removeEventListener("mousedown",M,!0),t.removeEventListener("touchend",M,at),t.removeEventListener("touchstart",F,at),t.removeEventListener("touchmove",U,at)}function z(t,e){var n=k().box;function r(t){t.target===n&&(_t(n,"remove",r),e())}if(0===t)return e();_t(n,"remove",u),_t(n,"add",r),u=r}function G(e,n,r){void 0===r&&(r=!1),pt(w.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,r),y.push({node:t,eventType:e,handler:n,options:r})}))}function H(){var t;N()&&(G("touchstart",K,{passive:!0}),G("touchend",X,{passive:!0})),(t=w.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(G(t,K),t){case"mouseenter":G("mouseleave",X);break;case"focus":G(Ot?"focusout":"blur",W);break;case"focusin":G("focusout",W)}}))}function Y(){y.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),y=[]}function K(t){var e,n=!1;if(w.state.isEnabled&&!J(t)&&!p){var r="focus"===(null==(e=s)?void 0:e.type);s=t,c=t.currentTarget,V(),!w.state.isVisible&&ft(t,"MouseEvent")&&Ut.forEach((function(e){return e(t)})),"click"===t.type&&(w.props.trigger.indexOf("mouseenter")<0||l)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:et(t),"click"===t.type&&(l=!n),n&&!r&&nt(t)}}function Q(t){var e=t.target,n=S().contains(e)||E.contains(e);"mousemove"===t.type&&n||function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props.interactiveBorder,s=i.placement.split("-")[0],u=i.modifiersData.offset;if(!u)return!0;var a="bottom"===s?u.top.y:0,c="top"===s?u.bottom.y:0,f="right"===s?u.left.x:0,h="left"===s?u.right.x:0,l=e.top-r+a>o,p=r-e.bottom-c>o,d=e.left-n+f>o,v=n-e.right-h>o;return l||p||d||v}))}(tt().concat(E).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:h}:null})).filter(Boolean),t)&&(j(),nt(t))}function X(t){J(t)||w.props.trigger.indexOf("click")>=0&&l||(w.props.interactive?w.hideWithInteractivity(t):nt(t))}function W(t){w.props.trigger.indexOf("focusin")<0&&t.target!==S()||w.props.interactive&&t.relatedTarget&&E.contains(t.relatedTarget)||nt(t)}function J(t){return!!Et.isTouch&&N()!==t.type.indexOf("touch")>=0}function $(){Z();var e=w.props,n=e.popperOptions,r=e.placement,i=e.offset,o=e.getReferenceClientRect,s=e.moveTransition,u=O()?Vt(E).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||S()}:t,f=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(O()){var n=k().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];O()&&u&&f.push({name:"arrow",options:{element:u,padding:3}}),f.push.apply(f,(null==n?void 0:n.modifiers)||[]),w.popperInstance=it(c,E,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:f}))}function Z(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function tt(){return vt(E.querySelectorAll("[data-tippy-root]"))}function et(t){w.clearDelayTimeouts(),t&&L("onTrigger",[w,t]),q();var e=P(!0),n=x(),i=n[0],o=n[1];Et.isTouch&&"hold"===i&&o&&(e=o),e?r=setTimeout((function(){w.show()}),e):w.show()}function nt(t){if(w.clearDelayTimeouts(),L("onUntrigger",[w,t]),w.state.isVisible){
if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&l)){var e=P(!1);e?i=setTimeout((function(){w.state.isVisible&&w.hide()}),e):o=requestAnimationFrame((function(){w.hide()}))}}else B()}}function Bt(t,e){void 0===e&&(e={});var n=St.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Tt,at),window.addEventListener("blur",xt);var r=Object.assign({},e,{plugins:n}),i=gt(t).reduce((function(t,e){var n=e&&qt(e,r);return n&&t.push(n),t}),[]);return mt(t)?i[0]:i}Bt.defaultProps=St,Bt.setDefaultProps=function(t){Object.keys(t).forEach((function(e){St[e]=t[e]}))},Bt.currentInput=Et,Bt.setDefaultProps({render:jt});const zt=t=>void 0!==t&&null!=t,Gt=t=>{const e={[t.id]:t.checked};return new Promise((async(t,n)=>{try{await chrome.storage.local.set(e,(()=>(Xt("Einstellung erfolgreich gespeichert","success"),t(e))))}catch(t){return Xt(`Es ist ein Fehler beim Speichern der Einstellungen aufgetreten: ${t}`,"error"),n(t)}}))},Ht=t=>{let e=t.getAttribute("maxlength")-1-t.value.length;"TEXTAREA"==t.tagName?Yt(e,document.getElementById("text__counter-textarea")):Yt(e,document.getElementById("text__counter-input"))},Yt=(t,e)=>{t<0?(e.innerText="zu viele Zeichen",e.classList.add("warning")):(e.innerText=t,e.classList.remove("warning"))},Kt=t=>new Promise(((e,n)=>{try{console.log(typeof t),"string"!=typeof t?chrome.storage.local.get([t.id],(n=>e(n[t.id]))):chrome.storage.local.get(t,(n=>e(n[t])))}catch(t){return n(t)}})),Qt=()=>new Promise((async(t,e)=>{try{chrome.storage.local.get(["currentDomain"],(e=>t(e.currentDomain)))}catch(t){return e(t)}})),Xt=(t,e)=>{let n=document.createElement("div");n.classList.add("notification","notification__success");const r=document.getElementById("notificationContainer");let i;zt(r)&&("success"===e?i='<div class="icon icon__success">\n                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">\n                    <path d="M14.789 9.812l-3.618 3.617-1.959-1.958a.749.749 0 10-1.06 1.06l2.489 2.489a.749.749 0 001.06 0l4.148-4.148a.749.749 0 10-1.06-1.06z" fill="#323232"/>\n                    <path d="M19.159 5.173a10.522 10.522 0 01-6.034-2.509v-.001a1.748 1.748 0 00-2.251.001 10.523 10.523 0 01-6.033 2.509A1.74 1.74 0 003.25 6.912v4.33c0 4.69 3.382 9.093 8.024 10.407.471.133.982.133 1.453 0 4.641-1.315 8.023-5.716 8.023-10.406v-4.33a1.74 1.74 0 00-1.592-1.74h.001zm-.118 1.496h.001c.122.009.208.121.208.244v4.33c0 4.044-2.93 7.829-6.931 8.962-.207.059-.43.059-.637 0-4.002-1.132-6.932-4.919-6.932-8.963v-4.33c0-.123.086-.234.208-.243h.001a12.021 12.021 0 006.892-2.867h.001a.23.23 0 01.297.001 12.02 12.02 0 006.892 2.866z" fill="#323232"/>\n                </svg>\n            </div>\n            <p class="notification__text">'+t+"</p>":"error"===e&&(i='<div class="icon icon__error">\n                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">\n                    <path d="M12.75 13.12V9.38a.75.75 0 00-1.5 0v3.74a.75.75 0 001.5 0zm-.699 2.256l-.052-.001-.039.001a.999.999 0 00.04 1.999 1 1 0 00.051-1.999zm-.078 1.498a.226.226 0 00.026.001l-.026-.001z" fill="#323232"/>\n                    <path d="M14.68 3.767c-1.185-2.075-4.175-2.075-5.36 0L1.661 17.171c-1.177 2.058.309 4.619 2.68 4.619h15.318c2.37 0 3.856-2.561 2.68-4.619L14.68 3.767zm-1.302.744l7.659 13.404a1.588 1.588 0 01-1.378 2.375H4.341a1.587 1.587 0 01-1.378-2.375l7.659-13.404a1.587 1.587 0 012.756 0z" fill="#323232"/>\n                </svg>\n            </div>\n            <p class="notification__text">'+t+"</p>"),n.innerHTML=i.trim(),r.innerHTML="",r.appendChild(n))},Wt=(t,e)=>{for(const n of t.parentNode.children)n.classList.remove(e);t.classList.add(e)};class Jt{counter;constructor(t){this.counter=t}}class $t extends Jt{constructor(t){super(t),this.createItem()}createItem=()=>{let t=document.createElement("div");t.classList.add("item","item-pattern"),t.innerHTML='<div class="item__info">\n                    <div class="icon icon__pattern">\n                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" class="icon-cookie">\n                            <path d="M12.685 2.694A.75.75 0 0012 2.25 9.75 9.75 0 002.25 12 9.75 9.75 0 0012 21.75 9.75 9.75 0 0021.75 12a.75.75 0 00-.75-.75c-1.789 0-3.407-1.353-4.747-2.908-2.164-2.51-3.568-5.648-3.568-5.648zm-1.153 1.069c.493 1.004 1.795 3.483 3.585 5.559 1.443 1.674 3.21 3.058 5.105 3.365a8.25 8.25 0 11-8.69-8.924z" fill="#323232"/>\n                            <circle cx="9.868" cy="12.868" r=".868" fill="#323232" transform="translate(1.46 -1.515) scale(1.05026)"/>\n                            <circle cx="9.868" cy="12.868" r=".868" fill="#323232" transform="translate(-2.357 .485) scale(1.05026)"/>\n                            <circle cx="9.868" cy="12.868" r=".868" fill="#323232" transform="translate(-1.354 -5.515) scale(1.05026)"/>\n                            <circle cx="9.868" cy="12.868" r=".868" fill="#323232" transform="translate(2.636 2.485) scale(1.05026)"/>\n                        </svg>\n                    </div>\n                    <p class="item__title">Cookie-Hinweis</p>\n                </div>\n                <div class="item__interaction item__interaction-pattern">\n                    <div data-tooltip data-translate="icon__target" class="icon icon__target">\n                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" class="icon-target">\n                            <path d="M11.25 3.505A8.494 8.494 0 005.97 5.97a8.494 8.494 0 00-2.465 5.28H2a.75.75 0 000 1.5h1.505a8.494 8.494 0 002.465 5.28 8.494 8.494 0 005.28 2.465V22a.75.75 0 001.5 0v-1.505a8.494 8.494 0 005.28-2.465 8.494 8.494 0 002.465-5.28H22a.75.75 0 000-1.5h-1.505a8.494 8.494 0 00-2.465-5.28 8.494 8.494 0 00-5.28-2.465V2a.75.75 0 00-1.5 0v1.505zm1.5 1.507v1.432a.75.75 0 01-1.5 0V5.012a6.99 6.99 0 00-4.219 2.019 6.99 6.99 0 00-2.019 4.219h1.432a.75.75 0 010 1.5H5.012a6.99 6.99 0 002.019 4.219 6.996 6.996 0 004.219 2.019v-1.432a.75.75 0 011.5 0v1.432a6.996 6.996 0 004.219-2.019 6.996 6.996 0 002.019-4.219h-1.432a.75.75 0 010-1.5h1.432a6.996 6.996 0 00-2.019-4.219l-.064-.064a6.994 6.994 0 00-4.155-1.955z" fill="#323232"/>\n                        </svg>\n\n                    </div>\n                    <div data-tooltip data-translate="item__counter" class="item__counter">\n                        <p>1</p>\n                    </div>\n                </div>\n            </div>'.trim(),document.getElementById("auditItems").appendChild(t)}}class Zt extends Jt{constructor(t){super(t),this.createItem()}createItem=()=>{let t=document.createElement("div");t.classList.add("item","item-pattern"),t.innerHTML='<div class="item__info">\n                    <div class="icon icon__pattern">\n                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">\n                            <path d="M12.278 2.597a.63.63 0 01-.554 0l-1.451-.709a2.132 2.132 0 00-2.819.917L6.698 4.23a.633.633 0 01-.449.326l-1.59.279a2.13 2.13 0 00-1.742 2.398l.225 1.597v.001a.63.63 0 01-.171.527l-1.122 1.16a2.131 2.131 0 000 2.964l1.122 1.159a.63.63 0 01.171.527l-.226 1.599a2.132 2.132 0 001.742 2.398l1.59.279a.636.636 0 01.45.326l.756 1.426a2.132 2.132 0 002.819.917l1.45-.709a.63.63 0 01.555 0l1.45.709a2.132 2.132 0 002.819-.917l.756-1.425a.636.636 0 01.45-.326l1.59-.279a2.132 2.132 0 001.742-2.398l-.226-1.599a.63.63 0 01.171-.527l1.122-1.16c.8-.827.799-2.138 0-2.964L21.03 9.359a.63.63 0 01-.171-.527l.226-1.599a2.132 2.132 0 00-1.742-2.398l-1.59-.279a.636.636 0 01-.45-.326l-.757-1.426a2.13 2.13 0 00-2.818-.916l-1.45.709zm.658 1.348l1.45-.709a.63.63 0 01.835.271l.758 1.427c.308.58.866.986 1.514 1.1l1.59.279a.63.63 0 01.516.71l-.226 1.598a2.13 2.13 0 00.579 1.78l1.122 1.161a.632.632 0 010 .878l-1.122 1.16a2.132 2.132 0 00-.579 1.781l.226 1.597a.63.63 0 01-.516.71l-1.59.279a2.132 2.132 0 00-1.514 1.1l-.758 1.427a.631.631 0 01-.835.271l-1.45-.709a2.134 2.134 0 00-1.871 0l-1.45.709a.63.63 0 01-.835-.271l-.758-1.428a2.132 2.132 0 00-1.514-1.1l-1.59-.279a.63.63 0 01-.516-.71l.226-1.598a2.13 2.13 0 00-.579-1.78l-1.122-1.161a.632.632 0 010-.878l1.122-1.16a2.132 2.132 0 00.579-1.781l-.225-1.597v-.001a.629.629 0 01.515-.708l1.591-.279a2.135 2.135 0 001.513-1.1l.758-1.427a.631.631 0 01.835-.271l1.45.709a2.13 2.13 0 001.871 0z" fill="#323232"/>\n                            <path d="M9.53 15.53l6-6a.749.749 0 10-1.06-1.06l-6 6a.749.749 0 101.06 1.06zm-.229-7.279l-.052-.001-.039.001a.999.999 0 00.04 1.999 1 1 0 00.051-1.999zm5.5 5.5l-.052-.001-.039.001a.999.999 0 00.04 1.999 1 1 0 00.051-1.999z" fill="#323232"/>\n                        </svg>\n                    </div>\n                    <p class="item__titel">Cookie-Hinweis</p>\n                </div>\n                <div class="item__interaction item__interaction-pattern">\n                    <div data-tooltip data-translate="icon__target" class="icon icon__target">\n                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" class="icon-target">\n                            <path d="M11.25 3.505A8.494 8.494 0 005.97 5.97a8.494 8.494 0 00-2.465 5.28H2a.75.75 0 000 1.5h1.505a8.494 8.494 0 002.465 5.28 8.494 8.494 0 005.28 2.465V22a.75.75 0 001.5 0v-1.505a8.494 8.494 0 005.28-2.465 8.494 8.494 0 002.465-5.28H22a.75.75 0 000-1.5h-1.505a8.494 8.494 0 00-2.465-5.28 8.494 8.494 0 00-5.28-2.465V2a.75.75 0 00-1.5 0v1.505zm1.5 1.507v1.432a.75.75 0 01-1.5 0V5.012a6.99 6.99 0 00-4.219 2.019 6.99 6.99 0 00-2.019 4.219h1.432a.75.75 0 010 1.5H5.012a6.99 6.99 0 002.019 4.219 6.996 6.996 0 004.219 2.019v-1.432a.75.75 0 011.5 0v1.432a6.996 6.996 0 004.219-2.019 6.996 6.996 0 002.019-4.219h-1.432a.75.75 0 010-1.5h1.432a6.996 6.996 0 00-2.019-4.219l-.064-.064a6.994 6.994 0 00-4.155-1.955z" fill="#323232"/>\n                        </svg>\n\n                    </div>\n                    <div data-tooltip data-translate="item__counter" class="item__counter">\n                        <p>1</p>\n                    </div>\n                </div>'.trim(),document.getElementById("auditItems").appendChild(t)}}class te extends Jt{title;description;constructor(t,e){super(1),this.title=t,this.description=e,this.createItem()}createItem=()=>{let t='<div class="item__info">\n                    <div class="icon icon__pattern">\n                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">\n                            <path d="M2.75 19A3.25 3.25 0 016 15.75h4A3.25 3.25 0 0113.25 19a.75.75 0 001.5 0A4.75 4.75 0 0010 14.25H6A4.75 4.75 0 001.25 19a.75.75 0 001.5 0zm8.255-13.505a4.249 4.249 0 10-6.01 6.01 4.249 4.249 0 106.01-6.01zm-1.06 1.06a2.753 2.753 0 00-3.89 0 2.753 2.753 0 000 3.89 2.751 2.751 0 003.89-3.89zM16 14.75h3A2.25 2.25 0 0121.25 17a.75.75 0 001.5 0A3.75 3.75 0 0019 13.25h-3a.75.75 0 000 1.5zm3.798-8.548a3.25 3.25 0 10-4.596 4.597 3.25 3.25 0 004.596-4.597zm-1.061 1.061a1.748 1.748 0 00-2.474 0 1.748 1.748 0 000 2.474 1.748 1.748 0 002.474 0 1.748 1.748 0 000-2.474z" fill="#323232"/>\n                        </svg>\n                    </div>\n                    <p class="item__title">'+this.title+'</p>\n                </div>\n                <div class="item__interaction item__interaction-pattern">\n                    <div data-tooltip data-tippy-content="'+this.description+'" data-translate="pattern__community__info" class="icon info__icon">\n                        <a href="https://www.w3schools.com" target="_blank" alt="Dark Pattern Info Seite">\n                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">\n                                <path d="M11.254 15.246h-.485a.75.75 0 000 1.5h2.462a.75.75 0 000-1.5h-.477v-3.782a.75.75 0 00-.75-.75h-1.226a.75.75 0 000 1.5h.476v3.032z" fill="#323232"/>\n                                <circle cx="13.383" cy="6.883" r=".383" fill="#323232" transform="translate(-23.528 -9.843) scale(2.63039)"/>\n                            </svg>\n                        </a>\n                    </div>\n                </div>',e=document.createElement("div");e.classList.add("item","item-pattern"),e.innerHTML=t.trim(),document.getElementById("communityItems").appendChild(e),Bt("[data-tippy-content]")}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ne(t,e){function n(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var re=function(){return(re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ie(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function oe(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function se(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ae(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ue(arguments[e]));return t}function ce(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function fe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=fe(t[n],e[n]));return t}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var he=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var de=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,ve.prototype.create),o}return ne(e,t),e}(Error),ve=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?ye(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new de(i,u,r);return a},t}();function ye(t,e){return t.replace(me,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var me=/\{\$([^}]+)}/g;
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function be(t,e){var n=new we(t,e);return n.subscribe.bind(n)}var we=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_e),void 0===r.error&&(r.error=_e),void 0===r.complete&&(r.complete=_e);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _e(){}var Ee=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Ie="[DEFAULT]",Te=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Ie);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new he;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=re({identifier:Ie,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */(t))try{this.getOrInitializeService(Ie)}catch(t){}try{for(var r=se(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ue(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Ie),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ie(this,void 0,void 0,(function(){var t;return oe(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ae(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===Ie?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Ie:t},t}();
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Ae,xe=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Te(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */function Ne(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Oe,Se=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Oe||(Oe={}));var De,ke={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Pe=Oe.INFO,Ce=((Ae={})[Oe.DEBUG]="log",Ae[Oe.VERBOSE]="log",Ae[Oe.INFO]="info",Ae[Oe.WARN]="warn",Ae[Oe.ERROR]="error",Ae),Le=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ce[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ne(["["+i+"]  "+t.name+":"],n))}},Re=function(){function t(t){this.name=t,this._logLevel=Pe,this._logHandler=Le,this._userLogHandler=null,Se.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Oe))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ke[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ne([this,Oe.DEBUG],t)),this._logHandler.apply(this,Ne([this,Oe.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ne([this,Oe.VERBOSE],t)),this._logHandler.apply(this,Ne([this,Oe.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ne([this,Oe.INFO],t)),this._logHandler.apply(this,Ne([this,Oe.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ne([this,Oe.WARN],t)),this._logHandler.apply(this,Ne([this,Oe.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ne([this,Oe.ERROR],t)),this._logHandler.apply(this,Ne([this,Oe.ERROR],t))},t}();function Ve(t){Se.forEach((function(e){e.setLogLevel(t)}))}var je,Me=((De={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",De["bad-app-name"]="Illegal App name: '{$appName}",De["duplicate-app"]="Firebase App named '{$appName}' already exists",De["app-deleted"]="Firebase App named '{$appName}' already deleted",De["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",De["invalid-log-argument"]="First argument to `onLog` must be null or a function.",De),Ue=new ve("app","Firebase",Me),Fe="@firebase/app",qe="[DEFAULT]",Be=((je={})[Fe]="fire-core",je["@firebase/analytics"]="fire-analytics",je["@firebase/auth"]="fire-auth",je["@firebase/database"]="fire-rtdb",je["@firebase/functions"]="fire-fn",je["@firebase/installations"]="fire-iid",je["@firebase/messaging"]="fire-fcm",je["@firebase/performance"]="fire-perf",je["@firebase/remote-config"]="fire-rc",je["@firebase/storage"]="fire-gcs",je["@firebase/firestore"]="fire-fst",je["fire-js"]="fire-js",je["firebase-wrapper"]="fire-js-all",je),ze=new Re("@firebase/app"),Ge=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=fe(void 0,t),this.container=new xe(e.name),this._addComponent(new Ee("app",(function(){return o}),"PUBLIC"));try{for(var s=se(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=qe),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=qe),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ze.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ue.create("app-deleted",{appName:this.name_})},t}();Ge.prototype.name&&Ge.prototype.options||Ge.prototype.delete||console.log("dc");
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
function He(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=qe);var s=o.name;if("string"!=typeof s||!s)throw Ue.create("bad-app-name",{appName:String(s)});if(ge(e,s))throw Ue.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Be[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ze.warn(a.join(" "))}o(new Ee(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Ve,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ue.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ke[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Oe[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Se;r<i.length;r++)n(i[r])}
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!ge(e,t=t||qe))throw Ue.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return ze.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Ue.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&fe(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var f=se(Object.keys(e)),h=f.next();!h.done;h=f.next()){var l=h.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Ye=function t(){var e=He(Ge);return e.INTERNAL=re(re({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){fe(e,t)},createSubscribe:be,ErrorFactory:ve,deepExtend:fe}),e}(),Ke=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ze.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&ze.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Xe=Ye.initializeApp;Ye.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pe()&&ze.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Xe.apply(void 0,t)};var We=Ye;!function(t,e){t.INTERNAL.registerComponent(new Ee("platform-logger",(function(t){return new Ke(t)}),"PRIVATE")),t.registerVersion(Fe,"0.6.14",e),t.registerVersion("fire-js","")}(We);
/**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
We.registerVersion("firebase","8.2.7","app");
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var Je=function(t,e){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function $e(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ze,tn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},en=en||{},nn=tn||self;function rn(){}function on(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function sn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var un="closure_uid_"+(1e9*Math.random()>>>0),an=0;function cn(t,e,n){return t.call.apply(t.bind,arguments)}function fn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function hn(t,e,n){return(hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cn:fn).apply(null,arguments)}function ln(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function pn(){return Date.now()}function dn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function vn(){this.j=this.j,this.i=this.i}vn.prototype.j=!1,vn.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,un)&&t[un]||(t[un]=++an))},vn.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var yn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},mn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function gn(t){return Array.prototype.concat.apply([],arguments)}function bn(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function wn(t){return/^[\s\xa0]*$/.test(t)}var _n,En=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function In(t,e){return-1!=t.indexOf(e)}function Tn(t,e){return t<e?-1:t>e?1:0}t:{var An=nn.navigator;if(An){var xn=An.userAgent;if(xn){_n=xn;break t}}_n=""}function Nn(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function On(t){var e={};for(var n in t)e[n]=t[n];return e}var Sn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Sn.length;o++)n=Sn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function kn(t){return kn[" "](t),t}kn[" "]=rn;var Pn,Cn,Ln=In(_n,"Opera"),Rn=In(_n,"Trident")||In(_n,"MSIE"),Vn=In(_n,"Edge"),jn=Vn||Rn,Mn=In(_n,"Gecko")&&!(In(_n.toLowerCase(),"webkit")&&!In(_n,"Edge"))&&!(In(_n,"Trident")||In(_n,"MSIE"))&&!In(_n,"Edge"),Un=In(_n.toLowerCase(),"webkit")&&!In(_n,"Edge");function Fn(){var t=nn.document;return t?t.documentMode:void 0}t:{var qn="",Bn=(Cn=_n,Mn?/rv:([^\);]+)(\)|;)/.exec(Cn):Vn?/Edge\/([\d\.]+)/.exec(Cn):Rn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Cn):Un?/WebKit\/(\S+)/.exec(Cn):Ln?/(?:Version)[ \/]?(\S+)/.exec(Cn):void 0);if(Bn&&(qn=Bn?Bn[1]:""),Rn){var zn=Fn();if(null!=zn&&zn>parseFloat(qn)){Pn=String(zn);break t}}Pn=qn}var Gn,Hn={};function Yn(t){return function(t,e){var n=Hn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=En(String(Pn)).split("."),r=En(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=Tn(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Tn(0==s[2].length,0==u[2].length)||Tn(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(nn.document&&Rn){var Kn=Fn();Gn=Kn||(parseInt(Pn,10)||void 0)}else Gn=void 0;var Qn=Gn,Xn=!Rn||9<=Number(Qn),Wn=Rn&&!Yn("9"),Jn=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{nn.addEventListener("test",rn,e),nn.removeEventListener("test",rn,e)}catch(t){}return t}();function $n(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Zn(t,e){if($n.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Mn){t:{try{kn(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tr[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}$n.prototype.b=function(){this.defaultPrevented=!0},dn(Zn,$n);var tr={2:"touch",3:"pen",4:"mouse"};Zn.prototype.b=function(){Zn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Wn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var er="closure_listenable_"+(1e6*Math.random()|0),nr=0;function rr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++nr,this.Y=this.Z=!1}function ir(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function or(t){this.src=t,this.a={},this.b=0}function sr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=yn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ir(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ur(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}or.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ur(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new rr(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ar="closure_lm_"+(1e6*Math.random()|0),cr={};function fr(t,e,n,r,i){if(r&&r.once)return lr(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)fr(t,e[o],n,r,i);return null}return n=wr(n),t&&t[er]?t.va(e,n,sn(r)?!!r.capture:!!r,i):hr(t,e,n,!1,r,i)}function hr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=sn(i)?!!i.capture:!!i;if(s&&!Xn)return null;var u=gr(t);if(u||(t[ar]=u=new or(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=mr,e=Xn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Jn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lr(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)lr(t,e[o],n,r,i);return null}return n=wr(n),t&&t[er]?t.wa(e,n,sn(r)?!!r.capture:!!r,i):hr(t,e,n,!0,r,i)}function pr(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pr(t,e[o],n,r,i);else r=sn(r)?!!r.capture:!!r,n=wr(n),t&&t[er]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=ur(o=t.a[e],n,r,i))&&(ir(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gr(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ur(e,n,r,i)),(n=-1<t?e[t]:null)&&dr(n))}function dr(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[er])sr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gr(e))?(sr(n,t),0==n.b&&(n.src=null,e[ar]=null)):ir(t)}}}function vr(t){return t in cr?cr[t]:cr[t]="on"+t}function yr(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&dr(t),n.call(r,e)}function mr(t,e){if(t.Y)return!0;if(!Xn){if(!e)t:{e=["window","event"];for(var n=nn,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yr(t,e=new Zn(e,this))}return yr(t,new Zn(e,this))}function gr(t){return(t=t[ar])instanceof or?t:null}var br="__closure_events_fn_"+(1e9*Math.random()>>>0);function wr(t){return"function"==typeof t?t:(t[br]||(t[br]=function(e){return t.handleEvent(e)}),t[br])}function _r(){vn.call(this),this.c=new or(this),this.J=this,this.C=null}function Er(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new $n(e,t);else if(e instanceof $n)e.target=e.target||t;else{var i=e;Dn(e=new $n(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ir(s,r,!0,e)&&i}if(i=Ir(s=e.a=t,r,!0,e)&&i,i=Ir(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ir(s=e.a=n[o],r,!1,e)&&i}function Ir(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&sr(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}dn(_r,vn),_r.prototype[er]=!0,(Ze=_r.prototype).addEventListener=function(t,e,n,r){fr(this,t,e,n,r)},Ze.removeEventListener=function(t,e,n,r){pr(this,t,e,n,r)},Ze.G=function(){if(_r.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ir(n[r]);delete e.a[t],e.b--}}this.C=null},Ze.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ze.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Tr=nn.JSON.stringify;function Ar(){this.b=this.a=null}var xr,Nr=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Sr}),(function(t){t.reset()}));function Or(){var t=Cr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Sr(){this.next=this.b=this.a=null}function Dr(t){nn.setTimeout((function(){throw t}),0)}function kr(t,e){xr||function(){var t=nn.Promise.resolve(void 0);xr=function(){t.then(Lr)}}(),Pr||(xr(),Pr=!0),Cr.add(t,e)}Ar.prototype.add=function(t,e){var n=Nr.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Sr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Sr.prototype.reset=function(){this.next=this.b=this.a=null};var Pr=!1,Cr=new Ar;function Lr(){for(var t;t=Or();){try{t.a.call(t.b)}catch(t){Dr(t)}var e=Nr;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Pr=!1}function Rr(t,e){_r.call(this),this.b=t||1,this.a=e||nn,this.f=hn(this.Za,this),this.g=pn()}function Vr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function jr(t,e,n){if("function"==typeof t)n&&(t=hn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=hn(t.handleEvent,t)}return 2147483647<Number(e)?-1:nn.setTimeout(t,e||0)}function Mr(t){t.a=jr((function(){t.a=null,t.c&&(t.c=!1,Mr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}dn(Rr,_r),(Ze=Rr.prototype).aa=!1,Ze.M=null,Ze.Za=function(){if(this.aa){var t=pn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Er(this,"tick"),this.aa&&(Vr(this),this.start()))}},Ze.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=pn())},Ze.G=function(){Rr.X.G.call(this),Vr(this),delete this.a};var Ur=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Je(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Mr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(nn.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(vn);function Fr(t){vn.call(this),this.b=t,this.a={}}dn(Fr,vn);var qr=[];function Br(t,e,n,r){Array.isArray(n)||(n&&(qr[0]=n.toString()),n=qr);for(var i=0;i<n.length;i++){var o=fr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zr(t){Nn(t.a,(function(t,e){this.a.hasOwnProperty(e)&&dr(t)}),t),t.a={}}function Gr(){this.a=!0}function Hr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Tr(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Fr.prototype.G=function(){Fr.X.G.call(this),zr(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gr.prototype.info=function(){};var Yr={},Kr=null;function Qr(){return Kr=Kr||new _r}function Xr(t){$n.call(this,Yr.Fa,t)}function Wr(t){var e=Qr();Er(e,new Xr(e,t))}function Jr(t,e){$n.call(this,Yr.STAT_EVENT,t),this.stat=e}function $r(t){var e=Qr();Er(e,new Jr(e,t))}function Zr(t){$n.call(this,Yr.Ga,t)}function ti(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return nn.setTimeout((function(){t()}),e)}Yr.Fa="serverreachability",dn(Xr,$n),Yr.STAT_EVENT="statevent",dn(Jr,$n),Yr.Ga="timingevent",dn(Zr,$n);var ei={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ni={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ri(){}function ii(t){var e;return(e=t.a)||(e=t.a={}),e}function oi(){}ri.prototype.a=null;var si,ui={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ai(){$n.call(this,"d")}function ci(){$n.call(this,"c")}function fi(){}function hi(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Fr(this),this.P=li,t=jn?125:void 0,this.R=new Rr(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}dn(ai,$n),dn(ci,$n),dn(fi,ri),si=new fi;var li=45e3,pi={},di={};function vi(t,e,n){t.H=1,t.i=ji(ki(e)),t.j=n,t.I=!0,yi(t,null)}function yi(t,e){t.u=pn(),bi(t),t.l=ki(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Wi(n.b,"t",r),t.D=0,t.a=Ho(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ur(hn(t.Ca,t,t.a),t.O)),Br(t.J,t.a,"readystatechange",t.Xa),e=t.B?On(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Wr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var f=c[0];c=c[1];var h=f.split("_");s=2<=h.length&&"type"==h[1]?s+(f+"=")+c+"&":s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function mi(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=gi(t,n);if(i==di){4==e&&(t.h=4,$r(14),r=!1),Hr(t.c,t.f,null,"[Incomplete Response]");break}if(i==pi){t.h=4,$r(15),Hr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Hr(t.c,t.f,i,null),Ti(t,i)}4==e&&0==n.length&&(t.h=1,$r(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),jo(e),e.F=!0,$r(11))):(Hr(t.c,t.f,n,"[Invalid Chunked Response]"),Ii(t),Ei(t))}function gi(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?di:(n=Number(e.substring(n,r)),isNaN(n)?pi:(r+=1)+n>e.length?di:(e=e.substr(r,n),t.D=r+n,e))}function bi(t){t.T=pn()+t.P,wi(t,t.P)}function wi(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ti(hn(t.Va,t),e)}function _i(t){t.o&&(nn.clearTimeout(t.o),t.o=null)}function Ei(t){0==t.g.v||t.A||Fo(t.g,t)}function Ii(t){_i(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Vr(t.R),zr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ti(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ro(n.b,t)))if(n.I=t.N,!t.C&&ro(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Uo(n),Oo(n)}Vo(n),$r(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ti(hn(n.Sa,n),6e3));if(1>=no(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Bo(n,11)}else if((t.C||n.a==t)&&Uo(n),!wn(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var f=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var h=a.b;!h.a&&(In(f,"spdy")||In(f,"quic")||In(f,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(io(h,h.b),h.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Vi(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=pn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Go(a,a.C?a.ga:null,a.fa),p.C){oo(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(_i(d),bi(d)),a.a=p}else Ro(a);0<n.g.length&&ko(n)}else"stop"!=i[0]&&"close"!=i[0]||Bo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Bo(n,7):No(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Wr(4)}catch(t){}}function Ai(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(on(t)||"string"==typeof t)mn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(on(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(on(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xi(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xi)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ni(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Oi(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Oi(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Oi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ze=hi.prototype).setTimeout=function(t){this.P=t},Ze.Xa=function(t){t=t.target;var e=this.F;e&&3==Io(t)?e.f():this.Ca(t)},Ze.Ca=function(t){try{if(t==this.a)t:{var e=Io(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!jn&&!this.a.$())){this.A||4!=e||7==n||Wr(8==n||0>=r?3:2),_i(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wn(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,$r(12),Ii(this),Ei(this);break t}Hr(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ti(this,a)}this.I?(mi(this,e,o),jn&&this.b&&3==e&&(Br(this.J,this.R,"tick",this.Wa),this.R.start())):(Hr(this.c,this.f,o,null),Ti(this,o)),4==e&&Ii(this),this.b&&!this.A&&(4==e?Fo(this.g,this):(this.b=!1,bi(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,$r(12)):(this.h=0,$r(13)),Ii(this),Ei(this)}}}catch(t){}},Ze.Wa=function(){if(this.a){var t=Io(this.a),e=this.a.$();this.D<e.length&&(_i(this),mi(this,t,e),this.b&&4!=t&&bi(this))}},Ze.cancel=function(){this.A=!0,Ii(this)},Ze.Va=function(){this.o=null;var t=pn();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Wr(3),$r(17)),Ii(this),this.h=2,Ei(this)):wi(this,this.T-t)},(Ze=xi.prototype).K=function(){Ni(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ze.L=function(){return Ni(this),this.a.concat()},Ze.get=function(t,e){return Oi(this.b,t)?this.b[t]:e},Ze.set=function(t,e){Oi(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ze.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Si=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Di(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Di){this.a=void 0!==e?e:t.a,Pi(this,t.f),this.j=t.j,Ci(this,t.c),Li(this,t.h),this.g=t.g,e=t.b;var n=new Yi;n.c=e.c,e.a&&(n.a=new xi(e.a),n.b=e.b),Ri(this,n),this.i=t.i}else t&&(n=String(t).match(Si))?(this.a=!!e,Pi(this,n[1]||"",!0),this.j=Mi(n[2]||""),Ci(this,n[3]||"",!0),Li(this,n[4]),this.g=Mi(n[5]||"",!0),Ri(this,n[6]||"",!0),this.i=Mi(n[7]||"")):(this.a=!!e,this.b=new Yi(null,this.a))}function ki(t){return new Di(t)}function Pi(t,e,n){t.f=n?Mi(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ci(t,e,n){t.c=n?Mi(e,!0):e}function Li(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ri(t,e,n){e instanceof Yi?(t.b=e,function(t,e){e&&!t.f&&(Ki(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qi(this,e),Wi(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ui(e,Gi)),t.b=new Yi(e,t.a))}function Vi(t,e,n){t.b.set(e,n)}function ji(t){return Vi(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^pn()).toString(36)),t}function Mi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ui(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Fi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Fi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Di.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ui(e,qi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ui(e,qi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ui(n,"/"==n.charAt(0)?zi:Bi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ui(n,Hi)),t.join("")};var qi=/[#\/\?@]/g,Bi=/[#\?:]/g,zi=/[#\?]/g,Gi=/[#\?@]/g,Hi=/#/g;function Yi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ki(t){t.a||(t.a=new xi,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qi(t,e){Ki(t),e=Ji(t,e),Oi(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Oi((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ni(t)))}function Xi(t,e){return Ki(t),e=Ji(t,e),Oi(t.a.b,e)}function Wi(t,e,n){Qi(t,e),0<n.length&&(t.c=null,t.a.set(Ji(t,e),bn(n)),t.b+=n.length)}function Ji(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ze=Yi.prototype).add=function(t,e){Ki(this),this.c=null,t=Ji(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ze.forEach=function(t,e){Ki(this),this.a.forEach((function(n,r){mn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ze.L=function(){Ki(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ze.K=function(t){Ki(this);var e=[];if("string"==typeof t)Xi(this,t)&&(e=gn(e,this.a.get(Ji(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=gn(e,t[n])}return e},Ze.set=function(t,e){return Ki(this),this.c=null,Xi(this,t=Ji(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ze.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ze.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $i=function(t,e){this.b=t,this.a=e};function Zi(t){this.g=t||to,nn.PerformanceNavigationTiming?t=0<(t=nn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(nn.ia&&nn.ia.ya&&nn.ia.ya()&&nn.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var to=10;function eo(t){return!!t.b||!!t.a&&t.a.size>=t.f}function no(t){return t.b?1:t.a?t.a.size:0}function ro(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function io(t,e){t.a?t.a.add(e):t.b=e}function oo(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function so(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=$e(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return bn(t.c)}function uo(){}function ao(){this.a=new uo}function co(t,e,n){var r=n||"";try{Ai(t,(function(t,n){var i=t;sn(t)&&(i=Tr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function fo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Zi.prototype.cancel=function(){var t,e;if(this.c=so(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=$e(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},uo.prototype.stringify=function(t){return nn.JSON.stringify(t,void 0)},uo.prototype.parse=function(t){return nn.JSON.parse(t,void 0)};var ho=nn.JSON.parse;function lo(t){_r.call(this),this.headers=new xi,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=po,this.D=this.F=!1}dn(lo,_r);var po="",vo=/^https?$/i,yo=["POST","PUT"];function mo(t){return"content-type"==t.toLowerCase()}function go(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bo(t),_o(t)}function bo(t){t.u||(t.u=!0,Er(t,"complete"),Er(t,"error"))}function wo(t){if(t.b&&void 0!==en&&(!t.s[1]||4!=Io(t)||2!=t.W()))if(t.l&&4==Io(t))jr(t.za,0,t);else if(Er(t,"readystatechange"),4==Io(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Si)[1]||null;if(!o&&nn.self&&nn.self.location){var s=nn.self.location.protocol;o=s.substr(0,s.length-1)}i=!vo.test(o?o.toLowerCase():"")}e=i}if(e)Er(t,"complete"),Er(t,"success");else{t.h=6;try{var u=2<Io(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",bo(t)}}finally{_o(t)}}}function _o(t,e){if(t.a){Eo(t);var n=t.a,r=t.s[0]?rn:null;t.a=null,t.s=null,e||Er(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Eo(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(nn.clearTimeout(t.m),t.m=null)}function Io(t){return t.a?t.a.readyState:0}function To(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Nn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Vi(t,e,n))}function Ao(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xo(t){this.pa=0,this.g=[],this.c=new Gr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ao("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ao("baseRetryDelayMs",5e3,t),this.Ra=Ao("retryDelaySeedMs",1e4,t),this.Ma=Ao("forwardChannelMaxRetries",2,t),this.ma=Ao("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Zi(t&&t.concurrentRequestLimit),this.ka=new ao,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function No(t){if(So(t),3==t.v){var e=t.R++,n=ki(t.B);Vi(n,"SID",t.J),Vi(n,"RID",e),Vi(n,"TYPE","terminate"),Co(t,n),(e=new hi(t,t.c,e,void 0)).H=2,e.i=ji(ki(n)),n=!1,nn.navigator&&nn.navigator.sendBeacon&&(n=nn.navigator.sendBeacon(e.i.toString(),"")),!n&&nn.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ho(e.g,null),e.a.ba(e.i)),e.u=pn(),bi(e)}zo(t)}function Oo(t){t.a&&(jo(t),t.a.cancel(),t.a=null)}function So(t){Oo(t),t.j&&(nn.clearTimeout(t.j),t.j=null),Uo(t),t.b.cancel(),t.h&&("number"==typeof t.h&&nn.clearTimeout(t.h),t.h=null)}function Do(t,e){t.g.push(new $i(t.Oa++,e)),3==t.v&&ko(t)}function ko(t){eo(t.b)||t.h||(t.h=!0,kr(t.Ba,t),t.u=0)}function Po(t,e){var n;n=e?e.f:t.R++;var r=ki(t.B);Vi(r,"SID",t.J),Vi(r,"RID",n),Vi(r,"AID",t.P),Co(t,r),t.i&&t.l&&To(r,t.i,t.l),n=new hi(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Lo(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),io(t.b,n),vi(n,r,e)}function Co(t,e){t.f&&Ai({},(function(t,n){Vi(e,n,t)}))}function Lo(t,e,n){n=Math.min(t.g.length,n);var r=t.f?hn(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,f=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{co(f,s,"req"+c+"_")}catch(t){r&&r(f)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ro(t){t.a||t.j||(t.T=1,kr(t.Aa,t),t.o=0)}function Vo(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ti(hn(t.Aa,t),qo(t,t.o)),t.o++,!0)}function jo(t){null!=t.s&&(nn.clearTimeout(t.s),t.s=null)}function Mo(t){t.a=new hi(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ki(t.la);Vi(e,"RID","rpc"),Vi(e,"SID",t.J),Vi(e,"CI",t.H?"0":"1"),Vi(e,"AID",t.P),Co(t,e),Vi(e,"TYPE","xmlhttp"),t.i&&t.l&&To(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ji(ki(e)),n.j=null,n.I=!0,yi(n,t)}function Uo(t){null!=t.m&&(nn.clearTimeout(t.m),t.m=null)}function Fo(t,e){var n=null;if(t.a==e){Uo(t),jo(t),t.a=null;var r=2}else{if(!ro(t.b,e))return;n=e.s,oo(t.b,e),r=1}
if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=pn()-e.u;var i=t.u;Er(r=Qr(),new Zr(r,n,e,i)),ko(t)}else Ro(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(no(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ti(hn(t.Ba,t,e),qo(t,t.u)),t.u++,0)))}(t,e)||2==r&&Vo(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Bo(t,5);break;case 4:Bo(t,10);break;case 3:Bo(t,6);break;default:Bo(t,2)}}function qo(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Bo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=hn(t.Ya,t);n||(n=new Di("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||Pi(n,"https"),ji(n)),function(t,e){var n=new Gr;if(nn.Image){var r=new Image;r.onload=ln(fo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ln(fo,n,r,"TestLoadImage: error",!1,e),r.onabort=ln(fo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ln(fo,n,r,"TestLoadImage: timeout",!1,e),nn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else $r(2);t.v=0,t.f&&t.f.ra(e),zo(t),So(t)}function zo(t){t.v=0,t.I=-1,t.f&&(0==so(t.b).length&&0==t.g.length||(t.b.c.length=0,bn(t.g),t.g.length=0),t.f.qa())}function Go(t,e,n){var r=function(t){return t instanceof Di?ki(t):new Di(t,void 0)}(n);if(""!=r.c)e&&Ci(r,e+"."+r.c),Li(r,r.h);else{var i=nn.location;r=function(t,e,n,r){var i=new Di(null,void 0);return t&&Pi(i,t),e&&Ci(i,e),n&&Li(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Nn(t.V,(function(t,e){Vi(r,e,t)})),e=t.A,n=t.na,e&&n&&Vi(r,e,n),Vi(r,"VER",t.ha),Co(t,r),r}function Ho(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lo(t.Na)).F=t.C,e}function Yo(){}function Ko(){if(Rn&&!(10<=Number(Qn)))throw Error("Environmental error: no available transport.")}function Qo(t,e){_r.call(this),this.a=new xo(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!wn(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Jo(this)}function Xo(t){ai.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Wo(){ci.call(this),this.status=1}function Jo(t){this.a=t}(Ze=lo.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ii(this.H):ii(si),this.a.onreadystatechange=hn(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void go(this,t)}t=n||"";var i=new xi(this.headers);r&&Ai(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=mo,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=nn.FormData&&t instanceof nn.FormData,!(0<=yn(yo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Eo(this),0<this.o&&((this.D=function(t){return Rn&&Yn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=hn(this.xa,this)):this.m=jr(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){go(this,t)}},Ze.xa=function(){void 0!==en&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Er(this,"timeout"),this.abort(8))},Ze.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Er(this,"complete"),Er(this,"abort"),_o(this))},Ze.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_o(this,!0)),lo.X.G.call(this)},Ze.za=function(){this.j||(this.A||this.l||this.g?wo(this):this.Ua())},Ze.Ua=function(){wo(this)},Ze.W=function(){try{return 2<Io(this)?this.a.status:-1}catch(t){return-1}},Ze.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Ze.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ho(e)}},Ze.ua=function(){return this.h},Ze.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ze=xo.prototype).ha=8,Ze.v=1,Ze.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new hi(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Dn(r=On(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Lo(this,n,e),Vi(i=ki(this.B),"RID",t),Vi(i,"CVER",22),this.A&&Vi(i,"X-HTTP-Session-Id",this.A),Co(this,i),this.i&&r&&To(i,this.i,r),io(this.b,n),this.Ia&&Vi(i,"TYPE","init"),this.da?(Vi(i,"$req",e),Vi(i,"SID","null"),n.U=!0,vi(n,i,null)):vi(n,i,e),this.v=2}}else 3==this.v&&(t?Po(this,t):0==this.g.length||eo(this.b)||Po(this))},Ze.Aa=function(){if(this.j=null,Mo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ti(hn(this.Ta,this),t)}},Ze.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,$r(10),Oo(this),Mo(this))},Ze.Sa=function(){null!=this.m&&(this.m=null,Oo(this),Vo(this),$r(19))},Ze.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),$r(2)):(this.c.info("Failed to ping google.com"),$r(1))},(Ze=Yo.prototype).ta=function(){},Ze.sa=function(){},Ze.ra=function(){},Ze.qa=function(){},Ze.Ja=function(){},Ko.prototype.a=function(t,e){return new Qo(t,e)},dn(Qo,_r),Qo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;$r(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Go(t,null,t.fa),ko(t)},Qo.prototype.close=function(){No(this.a)},Qo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Do(this.a,e)}else this.l?((e={}).__data__=Tr(t),Do(this.a,e)):Do(this.a,t)},Qo.prototype.G=function(){this.a.f=null,delete this.f,No(this.a),delete this.a,Qo.X.G.call(this)},dn(Xo,ai),dn(Wo,ci),dn(Jo,Yo),Jo.prototype.ta=function(){Er(this.a,"a")},Jo.prototype.sa=function(t){Er(this.a,new Xo(t))},Jo.prototype.ra=function(t){Er(this.a,new Wo(t))},Jo.prototype.qa=function(){Er(this.a,"b")},Ko.prototype.createWebChannel=Ko.prototype.a,Qo.prototype.send=Qo.prototype.h,Qo.prototype.open=Qo.prototype.g,Qo.prototype.close=Qo.prototype.close,ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,ni.COMPLETE="complete",oi.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",_r.prototype.listen=_r.prototype.va,lo.prototype.listenOnce=lo.prototype.wa,lo.prototype.getLastError=lo.prototype.Qa,lo.prototype.getLastErrorCode=lo.prototype.ua,lo.prototype.getStatus=lo.prototype.W,lo.prototype.getResponseJson=lo.prototype.Pa,lo.prototype.getResponseText=lo.prototype.$,lo.prototype.send=lo.prototype.ba;var $o=ei,Zo=ni,ts=Yr,es=10,ns=11,rs=oi,is=lo,os=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},ss=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),us=new Re("@firebase/firestore");function as(){return us.logLevel}function cs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(us.logLevel<=Oe.DEBUG){var r=e.map(ls);us.debug.apply(us,ce(["Firestore (8.2.7): "+t],r))}}function fs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(us.logLevel<=Oe.ERROR){var r=e.map(ls);us.error.apply(us,ce(["Firestore (8.2.7): "+t],r))}}function hs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(us.logLevel<=Oe.WARN){var r=e.map(ls);us.warn.apply(us,ce(["Firestore (8.2.7): "+t],r))}}function ls(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var e}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function ps(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+t;throw fs(e),new Error(e)}function ds(t,e){t||ps()}function vs(t,e){return t}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function ys(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var ms=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ys(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function gs(t,e){return t<e?-1:t>e?1:0}function bs(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ws(t){return t+"\0"}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var _s=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return gs(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();_s.T=new _s("");var Es={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Is=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ne(e,t),e}(Error),Ts=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(_s.fromBase64String(e))}catch(e){throw new Is(Es.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(_s.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),As=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();As.UNAUTHENTICATED=new As(null),As.R=new As("google-credentials-uid"),As.P=new As("first-party-uid");
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var xs=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Ns=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(As.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Os=function(){function t(t){var e=this;this.D=null,this.currentUser=As.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(cs("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ds("string"==typeof n.accessToken),new xs(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return ds(null===t||"string"==typeof t),new As(t)},t}(),Ss=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=As.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ds=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Ss(this.F,this.O))},t.prototype.v=function(t){t(As.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),ks=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();ks.q=-1;var Ps=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Is(Es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Is(Es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Is(Es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Is(Es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?gs(this.nanoseconds,t.nanoseconds):gs(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Cs=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Ps(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Ls=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ps(),void 0===n?n=t.length-e:n>t.length-e&&ps(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Is(Es.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Ls),Vs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,js=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Vs.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Is(Es.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Is(Es.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Is(Es.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Is(Es.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Ls),Ms=function(){function t(t){this.path=t}return t._t=function(e){return new t(Rs.ot(e))},t.ft=function(e){return new t(Rs.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Rs.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Rs.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Rs(e.slice()))},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Us(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Bs=function(){function t(t){this.fields=t,t.sort(js.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return bs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),zs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Gs(t){if(ds(!!t),"string"==typeof t){var e=0,n=zs.exec(t);if(ds(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Hs(t.seconds),nanos:Hs(t.nanos)}}function Hs(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ys(t){return"string"==typeof t?_s.fromBase64String(t):_s.fromUint8Array(t)}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Ks(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qs(t){var e=t.mapValue.fields.__previous_value__;return Ks(e)?Qs(e):e}function Xs(t){var e=Gs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ps(e.seconds,e.nanos)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Ws(t){return null==t}function Js(t){return 0===t&&1/t==-1/0}function $s(t){return"number"==typeof t&&Number.isInteger(t)&&!Js(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ks(t)?4:10:ps()}function tu(t,e){var n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xs(t).isEqual(Xs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Gs(t.timestampValue),r=Gs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ys(t.bytesValue).isEqual(Ys(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Hs(t.geoPointValue.latitude)===Hs(e.geoPointValue.latitude)&&Hs(t.geoPointValue.longitude)===Hs(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Hs(t.integerValue)===Hs(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Hs(t.doubleValue),r=Hs(e.doubleValue);return n===r?Js(n)===Js(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],tu);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Us(n)!==Us(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!tu(n[i],r[i])))return!1;return!0}(t,e);default:return ps()}}function eu(t,e){return void 0!==(t.values||[]).find((function(t){return tu(t,e)}))}function nu(t,e){var n=Zs(t),r=Zs(e);if(n!==r)return gs(n,r);switch(n){case 0:return 0;case 1:return gs(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Hs(t.integerValue||t.doubleValue),r=Hs(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ru(t.timestampValue,e.timestampValue);case 4:return ru(Xs(t),Xs(e));case 5:return gs(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ys(t),r=Ys(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=gs(n[i],r[i]);if(0!==o)return o}return gs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=gs(Hs(t.latitude),Hs(e.latitude));return 0!==n?n:gs(Hs(t.longitude),Hs(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=nu(n[i],r[i]);if(o)return o}return gs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=gs(r[s],o[s]);if(0!==u)return u;var a=nu(n[r[s]],i[o[s]]);if(0!==a)return a}return gs(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ps()}}function ru(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return gs(t,e);var n=Gs(t),r=Gs(e),i=gs(n.seconds,r.seconds);return 0!==i?i:gs(n.nanos,r.nanos)}function iu(t){return ou(t)}function ou(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Gs(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ys(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ms.ft(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ou(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ou(t.fields[o])}return e+"}"}(t.mapValue):ps();var e,n}function su(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function uu(t){return!!t&&"integerValue"in t}function au(t){return!!t&&"arrayValue"in t}function cu(t){return!!t&&"nullValue"in t}function fu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hu(t){return!!t&&"mapValue"in t}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var lu=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!hu(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return tu(this.proto,t.proto)},t}(),pu=function(){function t(t){void 0===t&&(t=lu.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Zs(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(js.ct(),this.At);return null!=t?new lu(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=hu(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function du(t){var e=[];return Fs(t.fields||{},(function(t,n){var r=new js([t]);if(hu(n)){var i=du(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Bs(e)
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */}var vu=function(t,e){this.key=t,this.version=e},yu=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return ne(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(vu),mu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return ne(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(vu),gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(vu),bu=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function wu(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new bu(t,e,n,r,i,o,s)}function _u(t){var e=vs(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+iu(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),Ws(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Lu(e.startAt)),e.endAt&&(n+="|ub:",n+=Lu(e.endAt)),e.vt=n}return e.vt}function Eu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Vu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!tu(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mu(t.startAt,e.startAt)&&Mu(t.endAt,e.endAt)}function Iu(t){return Ms.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Tu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ne(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Au(t,n,r):"array-contains"===n?new Su(t,r):"in"===n?new Du(t,r):"not-in"===n?new ku(t,r):"array-contains-any"===n?new Pu(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new xu(t,n):new Nu(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(nu(e,this.value)):null!==e&&Zs(this.value)===Zs(e)&&this.Dt(nu(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ps()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Au=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ms.ft(r.referenceValue),i}return ne(e,t),e.prototype.matches=function(t){var e=Ms.H(t.key,this.key);return this.Dt(e)},e}(Tu),xu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ou("in",n),r}return ne(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Tu),Nu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ou("not-in",n),r}return ne(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Tu);function Ou(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ms.ft(t.referenceValue)}))}var Su=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ne(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return au(e)&&eu(e.arrayValue,this.value)},e}(Tu),Du=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ne(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&eu(this.value.arrayValue,e)},e}(Tu),ku=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ne(e,t),e.prototype.matches=function(t){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!eu(this.value.arrayValue,e)},e}(Tu),Pu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ne(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!au(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return eu(e.value.arrayValue,t)}))},e}(Tu),Cu=function(t,e){this.position=t,this.before=e};function Lu(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return iu(t)})).join(",")}var Ru=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Vu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ju(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Ms.H(Ms.ft(s.referenceValue),n.key):nu(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Mu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!tu(t.position[n],e.position[n]))return!1;return!0}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Uu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Nt=null,this.$t=null,this.startAt,this.endAt};function Fu(t,e,n,r,i,o,s,u){return new Uu(t,e,n,r,i,o,s,u)}function qu(t){return new Uu(t)}function Bu(t){return!Ws(t.limit)&&"F"===t.limitType}function zu(t){return!Ws(t.limit)&&"L"===t.limitType}function Gu(t){return t.xt.length>0?t.xt[0].field:null}function Hu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Yu(t){return null!==t.collectionGroup}function Ku(t){var e=vs(t);if(null===e.Nt){e.Nt=[];var n=Hu(e),r=Gu(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Ru(n)),e.Nt.push(new Ru(js.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var u=s[o];e.Nt.push(u),u.field.ut()&&(i=!0)}if(!i){var a=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Ru(js.ht(),a))}}}return e.Nt}function Qu(t){var e=vs(t);if(!e.$t)if("F"===e.limitType)e.$t=wu(e.path,e.collectionGroup,Ku(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ku(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ru(o.field,s))}var u=e.endAt?new Cu(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Cu(e.startAt.position,!e.startAt.before):null;e.$t=wu(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.$t}function Xu(t,e,n){return new Uu(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wu(t,e){return Eu(Qu(t),Qu(e))&&t.limitType===e.limitType}function Ju(t){return _u(Qu(t))+"|lt:"+t.limitType}function $u(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+iu(e.value);var e})).join(", ")+"]"),Ws(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Lu(t.startAt)),t.endAt&&(e+=", endAt: "+Lu(t.endAt)),"Target("+e+")"}(Qu(t))+"; limitType="+t.limitType+")"}function Zu(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Ms.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ju(t.startAt,Ku(t),e)||t.endAt&&ju(t.endAt,Ku(t),e))}(t,e)}function ta(t){return function(e,n){for(var r=!1,i=0,o=Ku(t);i<o.length;i++){var s=o[i],u=ea(s,e,n);if(0!==u)return u;r=r||s.field.ut()}return 0}}function ea(t,e,n){var r=t.field.ut()?Ms.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?nu(r,i):ps()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ps()}}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var na=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Cs.min()),void 0===o&&(o=Cs.min()),void 0===s&&(s=_s.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function ra(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Js(e)?"-0":e}}function ia(t){return{integerValue:""+t}}function oa(t,e){return $s(e)?ia(e):ra(t,e)}
/**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var sa=function(){this.qt=void 0};function ua(t,e,n){return t instanceof fa?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ha?la(t,e):t instanceof pa?da(t,e):function(t,e){var n=ca(t,e),r=ya(n)+ya(t.Ut);return uu(n)&&uu(t.Ut)?ia(r):ra(t.Qt,r)}(t,e)}function aa(t,e,n){return t instanceof ha?la(t,e):t instanceof pa?da(t,e):n}function ca(t,e){return t instanceof va?uu(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e}(sa),ha=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ne(e,t),e}(sa);function la(t,e){for(var n=ma(e),r=function(t){n.some((function(e){return tu(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ne(e,t),e}(sa);function da(t,e){for(var n=ma(e),r=function(t){n=n.filter((function(e){return!tu(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return ne(e,t),e}(sa);function ya(t){return Hs(t.integerValue||t.doubleValue)}function ma(t){return au(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var ga=function(t,e){this.field=t,this.transform=e},ba=function(t,e){this.version=t,this.transformResults=e},wa=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function _a(t,e){return void 0!==t.updateTime?e instanceof yu&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof yu}var Ea=function(){};function Ia(t,e,n){return t instanceof Oa?function(t,e,n){var r=t.value;if(n.transformResults){var i=ka(t.fieldTransforms,e,n.transformResults);r=Ca(t.fieldTransforms,r,i)}return new yu(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Sa?function(t,e,n){if(!_a(t.jt,e))return new gu(t.key,n.version);var r=Da(t,e,n.transformResults?ka(t.fieldTransforms,e,n.transformResults):[]);return new yu(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new mu(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ta(t,e,n){return t instanceof Oa?function(t,e,n){if(!_a(t.jt,e))return e;var r=t.value,i=Pa(t.fieldTransforms,n,e);r=Ca(t.fieldTransforms,r,i);var o=Na(e);return new yu(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Sa?function(t,e,n){if(!_a(t.jt,e))return e;var r=Na(e),i=Da(t,e,Pa(t.fieldTransforms,n,e));return new yu(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return _a(t.jt,e)?new mu(t.key,Cs.min()):e}(t,e)}function Aa(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof yu?e.field(o.field):void 0,u=ca(o.transform,s||null);null!=u&&(n=null==n?(new pu).set(o.field,u):n.set(o.field,u))}return n?n.Pt():null}(t.fieldTransforms,e)}function xa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&bs(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ha&&e instanceof ha||t instanceof pa&&e instanceof pa?bs(t.elements,e.elements,tu):t instanceof va&&e instanceof va?tu(t.Ut,e.Ut):t instanceof fa&&e instanceof fa}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Na(t){return t instanceof yu?t.version:Cs.min()}var Oa=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return ne(e,t),e}(Ea),Sa=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return ne(e,t),e}(Ea);function Da(t,e,n){var r;return r=function(t,e){var n=new pu(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof yu?e.data():lu.empty()),Ca(t.fieldTransforms,r,n)}function ka(t,e,n){var r=[];ds(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof yu&&(u=e.field(o.field)),r.push(aa(s,u,n[i]))}return r}function Pa(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=null;n instanceof yu&&(a=n.field(s.field)),r.push(ua(u,a,e))}return r}function Ca(t,e,n){for(var r=new pu(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var La,Ra,Va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return ne(e,t),e}(Ea),ja=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return ne(e,t),e}(Ea),Ma=function(t){this.count=t};function Ua(t){switch(t){case Es.OK:return ps();case Es.CANCELLED:case Es.UNKNOWN:case Es.DEADLINE_EXCEEDED:case Es.RESOURCE_EXHAUSTED:case Es.INTERNAL:case Es.UNAVAILABLE:case Es.UNAUTHENTICATED:return!1;case Es.INVALID_ARGUMENT:case Es.NOT_FOUND:case Es.ALREADY_EXISTS:case Es.PERMISSION_DENIED:case Es.FAILED_PRECONDITION:case Es.ABORTED:case Es.OUT_OF_RANGE:case Es.UNIMPLEMENTED:case Es.DATA_LOSS:return!0;default:return ps()}}function Fa(t){if(void 0===t)return fs("GRPC error has no .code"),Es.UNKNOWN;switch(t){case La.OK:return Es.OK;case La.CANCELLED:return Es.CANCELLED;case La.UNKNOWN:return Es.UNKNOWN;case La.DEADLINE_EXCEEDED:return Es.DEADLINE_EXCEEDED;case La.RESOURCE_EXHAUSTED:return Es.RESOURCE_EXHAUSTED;case La.INTERNAL:return Es.INTERNAL;case La.UNAVAILABLE:return Es.UNAVAILABLE;case La.UNAUTHENTICATED:return Es.UNAUTHENTICATED;case La.INVALID_ARGUMENT:return Es.INVALID_ARGUMENT;case La.NOT_FOUND:return Es.NOT_FOUND;case La.ALREADY_EXISTS:return Es.ALREADY_EXISTS;case La.PERMISSION_DENIED:return Es.PERMISSION_DENIED;case La.FAILED_PRECONDITION:return Es.FAILED_PRECONDITION;case La.ABORTED:return Es.ABORTED;case La.OUT_OF_RANGE:return Es.OUT_OF_RANGE;case La.UNIMPLEMENTED:return Es.UNIMPLEMENTED;case La.DATA_LOSS:return Es.DATA_LOSS;default:return ps()}}(Ra=La||(La={}))[Ra.OK=0]="OK",Ra[Ra.CANCELLED=1]="CANCELLED",Ra[Ra.UNKNOWN=2]="UNKNOWN",Ra[Ra.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ra[Ra.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ra[Ra.NOT_FOUND=5]="NOT_FOUND",Ra[Ra.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ra[Ra.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ra[Ra.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ra[Ra.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ra[Ra.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ra[Ra.ABORTED=10]="ABORTED",Ra[Ra.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ra[Ra.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ra[Ra.INTERNAL=13]="INTERNAL",Ra[Ra.UNAVAILABLE=14]="UNAVAILABLE",Ra[Ra.DATA_LOSS=15]="DATA_LOSS";
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var qa=function(){function t(t,e){this.H=t,this.root=e||za.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,za.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,za.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Ba(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Ba(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Ba(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Ba(this.root,t,this.H,!0)},t}(),Ba=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),za=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw ps();if(this.right.le())throw ps();var t=this.left.Ie();if(t!==this.right.Ie())throw ps();return t+(this.le()?0:1)},t}();za.EMPTY=null,za.RED=!0,za.Ht=!1,za.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ps()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ps()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ps()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ps()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ps()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new za(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var Ga=function(){function t(t){this.H=t,this.data=new qa(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Ha(this.data.te())},t.prototype.ee=function(t){return new Ha(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Ha=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Ya=new qa(Ms.H);function Ka(){return Ya}function Qa(){return Ka()}var Xa=new qa(Ms.H);function Wa(){return Xa}var Ja=new qa(Ms.H);var $a=new Ga(Ms.H);function Za(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=$a,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var tc=new Ga(gs);function ec(){return tc}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var nc=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Ms.H(e.key,n.key)}:function(t,e){return Ms.H(t.key,e.key)},this.ge=Wa(),this.Ve=new qa(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),rc=function(){function t(){this.be=new qa(Ms.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):ps():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),ic=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=u}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,nc.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Wu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),oc=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,sc.Le(e,n)),new t(Cs.min(),r,ec(),Ka(),Za())},t}(),sc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(_s.T,n,Za(),Za(),Za())},t}(),uc=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},ac=function(t,e){this.targetId=t,this.je=e},cc=function(t,e,n,r){void 0===n&&(n=_s.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fc=function(){function t(){this.Ge=0,this.ze=pc(),this.He=_s.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Za(),e=Za(),n=Za();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ps()}})),new sc(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=pc()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),hc=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Ka(),this._n=lc(),this.fn=new Ga(gs)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof yu?this.wn(r,t.We):t.We instanceof mu&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:ps()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Iu(i))if(0===n){var o=new Ms(i.path);this.En(e,o,new mu(o,Cs.min()))}else ds(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Iu(o.target)){var s=new Ms(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new mu(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Za();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new oc(t,n,this.fn,this.ln,r);return this.ln=Ka(),this._n=lc(),this.fn=new Ga(gs),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new fc,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Ga(gs),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||cs("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new fc),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function lc(){return new qa(Ms.H)}function pc(){return new qa(Ms.H)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var dc={asc:"ASCENDING",desc:"DESCENDING"},vc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yc=function(t,e){this.t=t,this.Bt=e};function mc(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gc(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function bc(t,e){return mc(t,e.j())}function wc(t){return ds(!!t),Cs.K(function(t){var e=Gs(t);return new Ps(e.seconds,e.nanos)}(t))}function _c(t,e){return function(t){return new Rs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Ec(t){var e=Rs.ot(t);return ds(Hc(e)),e}function Ic(t,e){return _c(t.t,e.path)}function Tc(t,e){var n=Ec(e);if(n.get(1)!==t.t.projectId)throw new Is(Es.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Is(Es.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Ms(Oc(n))}function Ac(t,e){return _c(t.t,e)}function xc(t){var e=Ec(t);return 4===e.length?Rs.ct():Oc(e)}function Nc(t){return new Rs(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Oc(t){return ds(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Sc(t,e,n){return{name:Ic(t,e),fields:n.proto.mapValue.fields}}function Dc(t,e){var n;if(e instanceof Oa)n={update:Sc(t,e.key,e.value)};else if(e instanceof Va)n={delete:Ic(t,e.key)};else if(e instanceof Sa)n={update:Sc(t,e.key,e.data),updateMask:Gc(e.Gt)};else{if(!(e instanceof ja))return ps();n={verify:Ic(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof fa)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof ha)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof pa)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof va)return{fieldPath:e.field.rt(),increment:n.Ut};throw ps()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:bc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ps()}(t,e.jt)),n}function kc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?wa.updateTime(wc(t.updateTime)):void 0!==t.exists?wa.exists(t.exists):wa.Kt()}(e.currentDocument):wa.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ds("REQUEST_TIME"===e.setToServerValue),n=new fa;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ha(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new pa(i)}else"increment"in e?n=new va(t,e.increment):ps();var o=js.lt(e.fieldPath);return new ga(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Tc(t,e.update.name),o=new lu({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Bs(e.map((function(t){return js.lt(t)})))}(e.updateMask);return new Sa(i,o,s,n,r)}return new Oa(i,o,n,r)}if(e.delete){var u=Tc(t,e.delete);return new Va(u,n)}if(e.verify){var a=Tc(t,e.verify);return new ja(a,n)}return ps()}function Pc(t,e){return{documents:[Ac(t,e.path)]}}function Cc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ac(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ac(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(fu(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NAN"}};if(cu(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(fu(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NOT_NAN"}};if(cu(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fc(t.field),op:Uc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Fc(t.field),direction:Mc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Ws(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Vc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Vc(e.endAt)),n}function Lc(t){var e=xc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ds(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Rc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Ru(qc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Ws(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=jc(n.startAt));var f=null;return n.endAt&&(f=jc(n.endAt)),Fu(e,i,u,s,a,"F",c,f)}function Rc(t){return t?void 0!==t.unaryFilter?[zc(t)]:void 0!==t.fieldFilter?[Bc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Rc(t)})).reduce((function(t,e){return t.concat(e)})):ps():[]}function Vc(t){return{before:t.before,values:t.position}}function jc(t){var e=!!t.before,n=t.values||[];return new Cu(n,e)}function Mc(t){return dc[t]}function Uc(t){return vc[t]}function Fc(t){return{fieldPath:t.rt()}}function qc(t){return js.lt(t.fieldPath)}function Bc(t){return Tu.create(qc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ps()}}(t.fieldFilter.op),t.fieldFilter.value)}function zc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qc(t.unaryFilter.field);return Tu.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qc(t.unaryFilter.field);return Tu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qc(t.unaryFilter.field);return Tu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qc(t.unaryFilter.field);return Tu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ps()}}function Gc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Hc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Yc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Kc=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&ps(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),Qc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Yc,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Jc(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=nf(e.target.error);n.Bn.reject(new Jc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Jc(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(cs("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Zc(e)},t}(),Xc=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(le())&&fs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return cs("SimpleDb","Removing database:",t),tf(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=le(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return ie(this,void 0,void 0,(function(){var e,n=this;return oe(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(cs("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Jc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Is(Es.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Jc(t,n))},i.onupgradeneeded=function(t){cs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){cs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ie(this,void 0,void 0,(function(){var i,o,s,u,a;return oe(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,f;return oe(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,u.Hn(t)];case 2:return u.db=h.sent(),e=Qc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Kc.reject(t)})).On(),a={},s.catch((function(){})),[4,e.qn];case 3:return[2,(a.value=(h.sent(),s),a)];case 4:return c=h.sent(),f="FirebaseError"!==c.name&&o<3,cs("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Wc=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return tf(this.Zn.delete())},t}(),Jc=function(t){function e(e,n){var r=this;return(r=t.call(this,Es.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ne(e,t),e}(Is);
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function $c(t){return"IndexedDbTransactionError"===t.name}var Zc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(cs("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(cs("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),tf(n)},t.prototype.add=function(t){return cs("SimpleDb","ADD",this.store.name,t,t),tf(this.store.add(t))},t.prototype.get=function(t){var e=this;return tf(this.store.get(t)).next((function(n){return void 0===n&&(n=null),cs("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return cs("SimpleDb","DELETE",this.store.name,t),tf(this.store.delete(t))},t.prototype.count=function(){return cs("SimpleDb","COUNT",this.store.name),tf(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){cs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Kc((function(n,r){e.onerror=function(t){var e=nf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new Kc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Wc(i),s=e(i.primaryKey,i.value,o);if(s instanceof Kc){var u=s.catch((function(t){return o.done(),Kc.reject(t)}));n.push(u)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return Kc.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function tf(t){return new Kc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=nf(t.target.error);n(e)}}))}var ef=!1;function nf(t){var e=Xc.Qn(le());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Is("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ef||(ef=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var rf=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Yc,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Is(Es.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function of(t,e){if(fs("AsyncQueue",e+": "+t),$c(t))return new Is(Es.UNAVAILABLE,e+": "+t);throw t}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var sf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uf=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function af(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ff(e)),e=cf(t.get(n),e);return ff(e)}function cf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ff(t){return t+""}function hf(t){var e=t.length;if(ds(e>=2),2===e)return ds(""===t.charAt(0)&&""===t.charAt(1)),Rs.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ps(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ps()}o=s+2}return new Rs(r)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var lf=function(t,e){this.seconds=t,this.nanoseconds=e},pf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};pf.store="owner",pf.key="owner";var df=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};df.store="mutationQueues",df.keyPath="userId";var vf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};vf.store="mutations",vf.keyPath="batchId",vf.userMutationsIndex="userMutationsIndex",vf.userMutationsKeyPath=["userId","batchId"];var yf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,af(e)]},t.key=function(t,e,n){return[t,af(e),n]},t}();yf.store="documentMutations",yf.PLACEHOLDER=new yf;var mf=function(t,e){this.path=t,this.readTime=e},gf=function(t,e){this.path=t,this.version=e},bf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};bf.store="remoteDocuments",bf.readTimeIndex="readTimeIndex",bf.readTimeIndexPath="readTime",bf.collectionReadTimeIndex="collectionReadTimeIndex",bf.collectionReadTimeIndexPath=["parentPath","readTime"];var wf=function(t){this.byteSize=t};wf.store="remoteDocumentGlobal",wf.key="remoteDocumentGlobalKey";var _f=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};_f.store="targets",_f.keyPath="targetId",_f.queryTargetsIndexName="queryTargetsIndex",_f.queryTargetsKeyPath=["canonicalId","targetId"];var Ef=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ef.store="targetDocuments",Ef.keyPath=["targetId","path"],Ef.documentTargetsIndex="documentTargetsIndex",Ef.documentTargetsKeyPath=["path","targetId"];var If=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};If.key="targetGlobalKey",If.store="targetGlobal";var Tf=function(t,e){this.collectionId=t,this.parent=e};Tf.store="collectionParents",Tf.keyPath=["collectionId","parent"];var Af=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Af.store="clientMetadata",Af.keyPath="clientId";var xf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};xf.store="bundles",xf.keyPath="bundleId";var Nf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Nf.store="namedQueries",Nf.keyPath="name";var Of=ce(ce(ce(ce([df.store,vf.store,yf.store,bf.store,_f.store,pf.store,If.store,Ef.store],[Af.store]),[wf.store]),[Tf.store]),[xf.store,Nf.store]),Sf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return ne(e,t),e}(uf);
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Df(t,e){var n=vs(t);return Xc.zn(n.ps,e)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var kf=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ia(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ta(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ta(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Za())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&bs(this.mutations,t.mutations,(function(t,e){return xa(t,e)}))&&bs(this.baseMutations,t.baseMutations,(function(t,e){return xa(t,e)}))},t}(),Pf=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){ds(e.mutations.length===r.length);for(var i=Ja,o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Cf=function(t){this.Fs=t};function Lf(t,e){if(e.document)return function(t,e,n){var r=Tc(t,e.name),i=wc(e.updateTime),o=new lu({mapValue:{fields:e.fields}});return new yu(r,i,o,{hasCommittedMutations:!!n})}(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ms.Et(e.noDocument.path),r=Uf(e.noDocument.readTime);return new mu(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Ms.Et(e.unknownDocument.path);return r=Uf(e.unknownDocument.version),new gu(i,r)}return ps()}function Rf(t,e,n){var r=Vf(n),i=e.key.path.X().it();if(e instanceof yu){var o=function(t,e){return{name:Ic(t,e.key),fields:e.bt().mapValue.fields,updateTime:mc(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new bf(null,null,o,s,r,i)}if(e instanceof mu){var u=e.key.path.it(),a=Mf(e.version);return s=e.hasCommittedMutations,new bf(null,new mf(u,a),null,s,r,i)}if(e instanceof gu){var c=e.key.path.it(),f=Mf(e.version);return new bf(new gf(c,f),null,null,!0,r,i)}return ps()}function Vf(t){var e=t.j();return[e.seconds,e.nanoseconds]}function jf(t){var e=new Ps(t[0],t[1]);return Cs.K(e)}function Mf(t){var e=t.j();return new lf(e.seconds,e.nanoseconds)}function Uf(t){var e=new Ps(t.seconds,t.nanoseconds);return Cs.K(e)}function Ff(t,e){for(var n=(e.baseMutations||[]).map((function(e){return kc(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return kc(t.Fs,e)})),u=Ps.fromMillis(e.localWriteTimeMs);return new kf(e.batchId,u,n,s)}function qf(t){var e,n,r=Uf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Uf(t.lastLimboFreeSnapshotVersion):Cs.min();return void 0!==t.query.documents?(ds(1===(n=t.query).documents.length),e=Qu(qu(xc(n.documents[0])))):e=function(t){return Qu(Lc(t))}(t.query),new na(e,t.targetId,0,t.lastListenSequenceNumber,r,i,_s.fromBase64String(t.resumeToken))}function Bf(t,e){var n,r=Mf(e.Ot),i=Mf(e.lastLimboFreeSnapshotVersion);n=Iu(e.target)?Pc(t.Fs,e.target):Cc(t.Fs,e.target);var o=e.resumeToken.toBase64();return new _f(e.targetId,_u(e.target),r,o,e.sequenceNumber,i,n)}function zf(t){var e=Lc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Xu(e,e.limit,"L"):e}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Gf=function(){function t(){}return t.prototype.Os=function(t,e){return Hf(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Uf(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return Hf(t).put({bundleId:(n=e).id,createTime:Mf(wc(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Yf(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:zf(e.bundledQuery),readTime:Uf(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return Yf(t).put(function(t){return{name:t.name,readTime:Mf(wc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Hf(t){return Df(t,xf.store)}function Yf(t){return Df(t,Nf.store)}
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Kf=function(){function t(){this.Bs=new Qf}return t.prototype.qs=function(t,e){return this.Bs.add(e),Kc.resolve()},t.prototype.Us=function(t,e){return Kc.resolve(this.Bs.getEntries(e))},t}(),Qf=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Ga(Rs.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ga(Rs.H)).it()},t}(),Xf=function(){function t(){this.Qs=new Qf}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:af(i)};return Wf(t).put(o)}return Kc.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ws(e),""],!1,!0);return Wf(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hf(o.parent))}return n}))},t}();function Wf(t){return Df(t,Tf.store)}
/**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Jf={Ks:!1,Ws:0,js:0,Gs:0},$f=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Zf(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){if(t.code!==Es.FAILED_PRECONDITION||t.message!==sf)throw t;return cs("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */$f.Xs=10,$f.Zs=1e3,$f.ti=new $f(41943040,$f.Xs,$f.Zs),$f.ei=new $f(-1,0,0);var th=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.si(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Fs(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.et=function(){return qs(this.ii)},t}(),eh=function(){function t(){this.ri=new th((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Cs.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Kc.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function nh(t,e,n){var r=t.store(vf.store),i=t.store(yf.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.hs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){ds(1===u)})));for(var c=[],f=0,h=n.mutations;f<h.length;f++){var l=h[f],p=yf.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Kc.Mn(o).next((function(){return c}))}function rh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ps();e=t.noDocument}return JSON.stringify(e).length}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var ih=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return ds(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sh(t).hs({index:vf.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=uh(t),s=sh(t);return s.add({}).next((function(u){ds("number"==typeof u);for(var a=new kf(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Dc(t.Fs,e)})),i=n.mutations.map((function(e){return Dc(t.Fs,e)}));return new vf(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,a),f=[],h=new Ga((function(t,e){return gs(t.rt(),e.rt())})),l=0,p=r;l<p.length;l++){var d=p[l],v=yf.key(i.userId,d.key.path,u);h=h.add(d.key.path.X()),f.push(s.put(c)),f.push(o.put(v,yf.PLACEHOLDER))}return h.forEach((function(e){f.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[u]=a.keys()})),Kc.Mn(f).next((function(){return a}))}))},t.prototype.Pi=function(t,e){var n=this;return sh(t).get(e).next((function(t){return t?(ds(t.userId===n.userId),Ff(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Kc.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return sh(t).hs({index:vf.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ds(e.batchId>=r),o=Ff(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return sh(t).hs({index:vf.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sh(t).rs(vf.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ff(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=yf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return uh(t).hs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],f=hf(a);if(u===n.userId&&e.path.isEqual(f))return sh(t).get(c).next((function(t){if(!t)throw ps();ds(t.userId===n.userId),o.push(Ff(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Ga(gs),i=[];return e.forEach((function(e){var o=yf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=uh(t).hs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=hf(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Kc.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=yf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Ga(gs);return uh(t).hs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],f=hf(a);s===n.userId&&r.nt(f)?f.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Si(t,u)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(sh(t).get(e).next((function(t){if(null===t)throw ps();ds(t.userId===n.userId),r.push(Ff(n.Qt,t))})))})),Kc.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return nh(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),Kc.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return Kc.resolve();var r=IDBKeyRange.lowerBound(yf.prefixForUser(e.userId)),i=[];return uh(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=hf(t[1]);i.push(o)}else r.done()})).next((function(){ds(0===i.length)}))}))},t.prototype.Fi=function(t,e){return oh(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return ah(t).get(this.userId).next((function(t){return t||new df(e.userId,-1,"")}))},t}();function oh(t,e,n){var r=yf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return uh(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function sh(t){return Df(t,vf.store)}function uh(t){return Df(t,yf.store)}function ah(t){return Df(t,df.store)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var ch=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),fh=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new ch(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return Cs.K(new Ps(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return hh(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return ds(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return hh(t).hs((function(s,u){var a=qf(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Ji(t,a)))})).next((function(){return Kc.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return hh(t).hs((function(t,n){var r=qf(n);e(r)}))},t.prototype.qi=function(t){return lh(t).get(If.key).next((function(t){return ds(null!==t),t}))},t.prototype.Ui=function(t,e){return lh(t).put(If.key,e)},t.prototype.Gi=function(t,e){return hh(t).put(Bf(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=_u(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hh(t).hs({range:r,index:_f.queryTargetsIndexName},(function(t,n,r){var o=qf(n);Eu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=ph(t);return e.forEach((function(e){var s=af(e.path);i.push(o.put(new Ef(n,s))),i.push(r.Ti.nr(t,n,e))})),Kc.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=ph(t);return Kc.forEach(e,(function(e){var o=af(e.path);return Kc.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=ph(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ph(t),i=Za();return r.hs({range:n,us:!0},(function(t,e,n){var r=hf(t[1]),o=new Ms(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=af(e.path),r=IDBKeyRange.bound([n],[ws(n)],!1,!0),i=0;return ph(t).hs({index:Ef.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return hh(t).get(e).next((function(t){return t?qf(t):null}))},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function hh(t){return Df(t,_f.store)}function lh(t){return Df(t,If.store)}function ph(t){return Df(t,Ef.store)}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function dh(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=gs(n,i);return 0===s?gs(r,o):s}var vh=function(){function t(t){this.cr=t,this.buffer=new Ga(dh),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();dh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),yh=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;cs("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return ie(e,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return $c(e=n.sent())?(cs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Zf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),mh=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Kc.resolve(ks.q);var r=new vh(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(cs("LruGarbageCollector","Garbage collection skipped; disabled"),Kc.resolve(Jf)):this.pr(t).next((function(r){return r<n.params.zs?(cs("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Jf):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,u,a,c=this,f=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(cs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.gr(t,n)})).next((function(t){return a=Date.now(),as()<=Oe.DEBUG&&cs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-f)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-f)+"ms"),Kc.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),gh=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new mh(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return bh(t,n)},t.prototype.ir=function(t,e,n){return bh(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return bh(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return ah(t).ls((function(r){return oh(t,r,e).next((function(t){return t&&(n=!0),Kc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,u){if(u<=e){var a=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),ph(t).delete([0,af(s.path)])}))}));i.push(a)}})).next((function(){return Kc.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return bh(t,e)},t.prototype.Dr=function(t,e){var n,r=ph(t),i=ks.q;return r.hs({index:Ef.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==ks.q&&e(new Ms(hf(n)),i),i=u,n=s):i=ks.q})).next((function(){i!==ks.q&&e(new Ms(hf(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function bh(t,e){return ph(t).put(function(t,e){return new Ef(0,af(t.path),e)}(e,t.bs))}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var wh=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Ih(t).put(Th(e),n)},t.prototype.li=function(t,e){var n=Ih(t),r=Th(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Ih(t).get(Th(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Ih(t).get(Th(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:rh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Qa();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=Qa(),i=new qa(Ms.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,rh(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return Kc.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Ih(t).hs({range:r},(function(t,e,r){for(var s=Ms.Et(t);o&&Ms.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Wa(),o=e.path.length+1,s={};if(n.isEqual(Cs.min())){var u=e.path.it();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.it(),c=Vf(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=bf.collectionReadTimeIndex}return Ih(t).hs(s,(function(t,n,s){if(t.length===o){var u=Lf(r.Qt,n);e.path.nt(u.key.path)?u instanceof yu&&Zu(e,u)&&(i=i.zt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new _h(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Eh(t).get(wf.key).next((function(t){return ds(!!t),t}))},t.prototype.kr=function(t,e){return Eh(t).put(wf.key,e)},t.prototype.Mr=function(t){if(t){var e=Lf(this.Qt,t);return e instanceof mu&&e.version.isEqual(Cs.min())?null:e}return null},t}(),_h=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new th((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ne(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Ga((function(t,e){return gs(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var u=e.Gr.get(o);if(s.hi){var a=Rf(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=rh(a);r+=c-u,n.push(e.jr.ai(t,o,a))}else if(r-=u,e.Wr){var f=Rf(e.jr.Qt,new mu(o,Cs.min()),e.ci(o));n.push(e.jr.ai(t,o,f))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),Kc.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(eh);function Eh(t){return Df(t,wf.store)}function Ih(t){return Df(t,bf.store)}function Th(t){return t.path.it()}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Ah=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;ds(n<r&&n>=0&&r<=11);var o=new Qc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(pf.store)}(t),function(t){t.createObjectStore(df.store,{keyPath:df.keyPath}),t.createObjectStore(vf.store,{keyPath:vf.keyPath,autoIncrement:!0}).createIndex(vf.userMutationsIndex,vf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yf.store)}(t),xh(t),function(t){t.createObjectStore(bf.store)}(t));var s=Kc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ef.store),t.deleteObjectStore(_f.store),t.deleteObjectStore(If.store)}(t),xh(t)),s=s.next((function(){return function(t){var e=t.store(If.store),n=new If(0,0,Cs.min().j(),0);return e.put(If.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(vf.store).rs().next((function(n){t.deleteObjectStore(vf.store),t.createObjectStore(vf.store,{keyPath:vf.keyPath,autoIncrement:!0}).createIndex(vf.userMutationsIndex,vf.userMutationsKeyPath,{unique:!0});var r=e.store(vf.store),i=n.map((function(t){return r.put(t)}));return Kc.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Af.store,{keyPath:Af.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(wf.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(bf.store);e.createIndex(bf.readTimeIndex,bf.readTimeIndexPath,{unique:!1}),e.createIndex(bf.collectionReadTimeIndex,bf.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(xf.store,{keyPath:xf.keyPath})}(t),function(t){t.createObjectStore(Nf.store,{keyPath:Nf.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(bf.store).hs((function(t,n){e+=rh(n)})).next((function(){var n=new wf(e);return t.store(wf.store).put(wf.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(df.store),r=t.store(vf.store);return n.rs().next((function(n){return Kc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(vf.userMutationsIndex,i).next((function(r){return Kc.forEach(r,(function(r){ds(r.userId===n.userId);var i=Ff(e.Qt,r);return nh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Ef.store),n=t.store(bf.store);return t.store(If.store).get(If.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Rs(n),s=function(t){return[0,af(t)]}(o);r.push(e.get(s).next((function(n){return n?Kc.resolve():function(n){return e.put(new Ef(0,af(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Kc.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Tf.store,{keyPath:Tf.keyPath});var n=e.store(Tf.store),r=new Qf,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:af(i)})}};return e.store(bf.store).hs({us:!0},(function(t,e){var n=new Rs(t);return i(n.X())})).next((function(){return e.store(yf.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],hf(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(_f.store);return n.hs((function(t,r){var i=qf(r),o=Bf(e.Qt,i);return n.put(o)}))},t}();function xh(t){t.createObjectStore(Ef.store,{keyPath:Ef.keyPath}).createIndex(Ef.documentTargetsIndex,Ef.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(_f.store,{keyPath:_f.keyPath}).createIndex(_f.queryTargetsIndexName,_f.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(If.store)}var Nh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Oh=function(){function t(e,n,r,i,o,s,u,a,c,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=u,this.eo=c,this.no=f,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Is(Es.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new gh(this,i),this.ho=n+"main",this.Qt=new Cf(a),this.lo=new Xc(this.ho,11,new Ah(this.Qt)),this._o=new fh(this.Ti,this.Qt),this.Ei=new Xf,this.fo=function(t,e){return new wh(t,e)}(this.Qt,this.Ei),this.wo=new Gf,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===f&&fs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Is(Es.FAILED_PRECONDITION,Nh);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new ks(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return ie(e,void 0,void 0,(function(){return oe(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return ie(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return ie(e,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Dh(e).put(new Af(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if($c(e))return cs("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return cs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Sh(t).get(pf.key).next((function(t){return Kc.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Dh(t).delete(this.clientId)},t.prototype.xo=function(){return ie(this,void 0,void 0,(function(){var t,e,n,r,i=this;return oe(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Df(t,Af.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Kc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Kc.resolve(!0):Sh(t).get(pf.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Is(Es.FAILED_PRECONDITION,Nh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Dh(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&cs("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return ie(this,void 0,void 0,(function(){var t=this;return oe(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[pf.store,Af.store],(function(e){var n=new Sf(e,ks.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Dh(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return ih.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;cs("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Of,(function(o){return i=new Sf(o,r.so?r.so.next():ks.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw fs("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new Is(Es.FAILED_PRECONDITION,sf);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Sh(t).get(pf.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Is(Es.FAILED_PRECONDITION,Nh)}))},t.prototype.So=function(t){var e=new pf(this.clientId,this.allowTabSynchronization,Date.now());return Sh(t).put(pf.key,e)},t.Kn=function(){return Xc.Kn()},t.prototype.vo=function(t){var e=this,n=Sh(t);return n.get(pf.key).next((function(t){return e.Do(t)?(cs("IndexedDbPersistence","Releasing primary lease."),n.delete(pf.key)):Kc.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(fs("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return cs("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return fs("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){fs("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Sh(t){return Df(t,pf.store)}function Dh(t){return Df(t,Af.store)}function kh(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */}var Ph=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=Qa();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Ka();return i.forEach((function(t,e){e||(e=new mu(t,Cs.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return Ms.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Yu(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Ms(e)).next((function(t){var e=Wa();return t instanceof yu&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Wa();return this.Ei.Us(t,i).next((function(s){return Kc.forEach(s,(function(s){var u=function(t,e){return new Uu(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,u,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,f=Ta(a,r.get(c),o.vs);r=f instanceof yu?r.zt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Zu(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Za(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Sa&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof yu&&(c=c.zt(t,e))})),c}))},t}(),Ch=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Za(),i=Za(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Lh=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(Cs.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(Bu(e)||zu(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(as()<=Oe.DEBUG&&cs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),$u(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Ga(ta(t));return e.forEach((function(e,r){r instanceof yu&&Zu(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return as()<=Oe.DEBUG&&cs("QueryEngine","Using full collection scan to execute query:",$u(e)),this.ac.Kr(t,e,Cs.min())},t}(),Rh=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new qa(gs),this.dc=new th((function(t){return _u(t)}),Eu),this.wc=Cs.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Ph(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Vh(t,e,n,r){return new Rh(t,e,n,r)}function jh(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o;return oe(this,(function(s){switch(s.label){case 0:return n=vs(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Ph(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Za(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var f=0,h=c.mutations;f<h.length;f++){var l=h[f];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Mh(t,e){var n=vs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Kc.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);ds(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function Uh(t){var e=vs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function Fh(t,e){var n=vs(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var u=i.get(o);if(u){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var a=e.resumeToken;if(a.l()>0){var c=u.Mt(a,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return ds(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(u,c,e)&&s.push(n._o.Hi(t,c))}}}));var u=Ka();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(function(t,e,n,r,i){var o=Za();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ka();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof mu&&s.version.isEqual(Cs.min())?(e.li(n,a),o=o.zt(n,s)):null==u||s.version._(u.version)>0||0===s.version._(u.version)&&u.hasPendingWrites?(e.ai(s,a),o=o.zt(n,s)):cs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.Oe,r,void 0).next((function(t){u=t}))),!r.isEqual(Cs.min())){var a=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(a)}return Kc.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,u)}))})).then((function(t){return n.fc=i,t}))}function qh(t,e){var n=vs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Bh(t,e){var n=vs(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,Kc.resolve(r)):n._o.Bi(t).next((function(i){return r=new na(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function zh(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,s;return oe(this,(function(u){switch(u.label){case 0:r=vs(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!$c(s=u.sent()))throw s;return cs("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Gh(t,e,n){var r=vs(t),i=Cs.min(),o=Za();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=vs(t),i=r.dc.get(n);return void 0!==i?Kc.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Qu(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:Cs.min(),n?o:Za())})).next((function(t){return{documents:t,Rc:o}}))}))}function Hh(t,e){var n=vs(t),r=vs(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function Yh(t){var e=vs(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=vs(t),i=Ka(),o=Vf(n),s=Ih(e),u=IDBKeyRange.lowerBound(o,!0);return s.hs({index:bf.readTimeIndex,range:u},(function(t,e){var n=Lf(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:jf(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function Kh(t){return ie(this,void 0,void 0,(function(){var e;return oe(this,(function(n){return[2,(e=vs(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ih(t),n=Cs.min();return e.hs({index:bf.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=jf(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Qh=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Kc.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:wc(n.createTime)}),Kc.resolve()},t.prototype.Ms=function(t,e){return Kc.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:zf(t.bundledQuery),readTime:wc(t.readTime)}}(e)),Kc.resolve()},t}(),Xh=function(){function t(){this.vc=new Ga(Wh.Sc),this.Dc=new Ga(Wh.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Wh(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Wh(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new Ms(new Rs([])),r=new Wh(n,t),i=new Wh(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Ms(new Rs([])),n=new Wh(e,t),r=new Wh(e,t+1),i=Za();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Wh(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Wh=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Ms.H(t.key,e.key)||gs(t.Mc,e.Mc)},t.Cc=function(t,e){return gs(t.Mc,e.Mc)||Ms.H(t.key,e.key)},t}(),Jh=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Ga(Wh.Sc)}return t.prototype.Ai=function(t){return Kc.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new kf(i,e,n,r);this.zo.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Bc=this.Bc.add(new Wh(a.key,i)),this.Ei.qs(t,a.key.path.X())}return Kc.resolve(o)},t.prototype.Pi=function(t,e){return Kc.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return Kc.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return Kc.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Kc.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Wh(e,0),i=new Wh(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),Kc.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Ga(gs);return e.forEach((function(t){var e=new Wh(t,0),i=new Wh(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),Kc.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Ms.wt(i)||(i=i.child(""));var o=new Wh(new Ms(i),0),s=new Ga(gs);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),Kc.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;ds(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Kc.forEach(e.mutations,(function(i){var o=new Wh(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Wh(e,0),r=this.Bc.Re(n);return Kc.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,Kc.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),$h=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new qa(Ms.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Kc.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Qa();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),Kc.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Wa(),i=new Ms(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),u=s.key,a=s.value,c=a.hi,f=a.readTime;if(!e.path.nt(u.path))break;f._(n)<=0||c instanceof yu&&Zu(e,c)&&(r=r.zt(c.key,c))}return Kc.resolve(r)},t.prototype.jc=function(t,e){return Kc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Zh(this)},t.prototype.Or=function(t){return Kc.resolve(this.size)},t}(),Zh=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return ne(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),Kc.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(eh),tl=function(){function t(t){this.persistence=t,this.Gc=new th((function(t){return _u(t)}),Eu),this.lastRemoteSnapshotVersion=Cs.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Xh,this.targetCount=0,this.Jc=ch.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),Kc.resolve()},t.prototype.Qi=function(t){return Kc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Kc.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Kc.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Kc.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new ch(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Kc.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Kc.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Kc.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,u.targetId)),i++)})),Kc.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return Kc.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Kc.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Kc.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),Kc.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Kc.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Kc.resolve(n)},t.prototype.Fi=function(t,e){return Kc.resolve(this.Hc.Fi(e))},t}(),el=function(){function t(t,e){var n=this;this.Yc={},this.so=new ks(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new tl(this),this.Ei=new Kf,this.fo=function(t,e){return new $h(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new Cf(e),this.wo=new Qh(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Jh(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;cs("MemoryPersistence","Starting transaction:",t);var i=new nl(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return Kc.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),nl=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return ne(e,t),e}(uf),rl=function(){function t(t){this.persistence=t,this.na=new Xh,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ps()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Kc.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Kc.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Kc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Kc.forEach(this.ra,(function(r){var i=Ms._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Kc.Ln([function(){return Kc.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function il(t,e){return"firestore_clients_"+t+"_"+e}function ol(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function sl(t,e){return"firestore_targets_"+t+"_"+e}var ul=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Is(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(fs("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),al=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Is(i.error.code,i.error.message)),o?new t(e,i.state,r):(fs("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ec(),s=0;i&&s<r.activeTargetIds.length;++s)i=$s(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(fs("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),fl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(fs("SharedClientState","Failed to parse online state: "+e),null)},t}(),hl=function(){function t(){this.activeTargetIds=ec()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ll=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new qa(gs),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=il(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new hl),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ie(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,f,h=this;return oe(this,(function(l){switch(l.label){case 0:return[4,this._a.Uo()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(il(this.persistenceKey,r)))&&(o=cl.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(u=this.pa(s))&&this.ba(u),a=0,c=this.Ta;a<c.length;a++)f=c[a],this.wa(f);return this.Ta=[],this.window.addEventListener("unload",(function(){return h.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(sl(this.persistenceKey,t));if(n){var r=al.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(sl(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return cs("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){cs("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){cs("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(cs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void fs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return ie(e,void 0,void 0,(function(){var t,e,r,i,o,s;return oe(this,(function(u){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=ks.q;if(null!=t)try{var n=JSON.parse(t);ds("number"==typeof n),e=n}catch(t){fs("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ks.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new ul(this.currentUser,t,e,n),i=ol(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=ol(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=sl(this.persistenceKey,t),i=new al(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return cl.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ul.ca(new As(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return al.ca(r,e)},t.prototype.pa=function(t){return fl.ca(t)},t.prototype.Ya=function(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(cs("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this._a.su(s,u).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=ec();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),pl=function(){function t(){this.iu=new hl,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new hl,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),dl=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),vl=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){cs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){cs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),yl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ml=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),gl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return ne(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new is;s.listenOnce(Zo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case $o.NO_ERROR:var e=s.getResponseJson();cs("Connection","XHR received:",JSON.stringify(e)),i(e);break;case $o.TIMEOUT:cs("Connection",'RPC "'+t+'" timed out'),o(new Is(Es.DEADLINE_EXCEEDED,"Request time out"));break;case $o.HTTP_ERROR:var n=s.getStatus();if(cs("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Es).indexOf(e)>=0?e:Es.UNKNOWN}(r.status);o(new Is(u,r.message))}else o(new Is(Es.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Is(Es.UNAVAILABLE,"Connection failed."));break;default:ps()}}finally{cs("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Cu=function(t,e){var n,r=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Ko,o=Qr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())||"object"==typeof navigator&&"ReactNative"===navigator.product||le().indexOf("Electron/")>=0||function(){var t=le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||le().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");cs("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,f=!1,h=new ml({fu:function(t){f?cs("Connection","Not sending because WebChannel is closed:",t):(c||(cs("Connection","Opening WebChannel transport."),a.open(),c=!0),cs("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,rs.EventType.OPEN,(function(){f||cs("Connection","WebChannel transport opened.")})),l(a,rs.EventType.CLOSE,(function(){f||(f=!0,cs("Connection","WebChannel transport closed"),h.Ru())})),l(a,rs.EventType.ERROR,(function(t){f||(f=!0,hs("Connection","WebChannel transport errored:",t),h.Ru(new Is(Es.UNAVAILABLE,"The operation could not be completed")))})),l(a,rs.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];ds(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){cs("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=La[t];if(void 0!==e)return Fa(e)}(o),u=i.message;void 0===s&&(s=Es.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),f=!0,h.Ru(new Is(s,u)),a.close()}else cs("Connection","WebChannel received:",n),h.Pu(n)}})),l(o,ts.STAT_EVENT,(function(t){t.stat===es?cs("Connection","Detected buffering proxy"):t.stat===ns&&cs("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Au()}),0),h},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);cs("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return cs("RestConnection","Received: ",t),t}),(function(e){throw hs("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=yl[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function bl(){return"undefined"!=typeof window?window:null}function wl(){return"undefined"!=typeof document?document:null}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function _l(t){return new yc(t,!0)}var El=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&cs("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Il=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new El(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return ie(this,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return ie(this,void 0,void 0,(function(){return oe(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return ie(this,void 0,void 0,(function(){return oe(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Es.RESOURCE_EXHAUSTED?(fs(e.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Es.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Is(Es.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return ie(t,void 0,void 0,(function(){return oe(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return cs("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(cs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Tl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return ne(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ps()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(ds(void 0===e||"string"==typeof e),_s.fromBase64String(e||"")):(ds(void 0===e||e instanceof Uint8Array),_s.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Es.UNKNOWN:Fa(t.code);return new Is(e,t.message||"")}(u);n=new cc(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Tc(t,r.document.name),o=wc(r.document.updateTime);var u=new lu({mapValue:{fields:r.document.fields}}),a=(s=new yu(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new uc(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Tc(t,r.document),o=r.readTime?wc(r.readTime):Cs.min(),u=new mu(i,o),s=r.removedTargetIds||[],n=new uc([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Tc(t,r.document),o=r.removedTargetIds||[],n=new uc([],o,i,null);else{if(!("filter"in e))return ps();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new Ma(r),o=f.targetId,n=new ac(o,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Cs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Cs.min():e.readTime?wc(e.readTime):Cs.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Nc(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Iu(r)?{documents:Pc(t,r)}:{query:Cc(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=gc(t,e.resumeToken):e.Ot._(Cs.min())>0&&(n.readTime=mc(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ps()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Nc(this.Qt),e.removeTarget=t,this.th(e)},e}(Il),Al=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return ne(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(ds(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(ds(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?wc(t.updateTime):wc(e);n.isEqual(Cs.min())&&(n=wc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ba(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=wc(t.commitTime);return this.listener.dh(n,e)}return ds(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Nc(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Dc(e.Qt,t)}))};this.th(n)},e}(Il),xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return ne(e,t),e.prototype.Ih=function(){if(this.Th)throw new Is(Es.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Es.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Es.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),Nl=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(fs(e),this.Rh=!1):cs("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Ol=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return ie(o,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return jl(this)?(cs("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ie(this,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return(e=vs(t)).Nh.add(4),[4,Dl(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Sl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new Nl(n,r)};
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Sl(t){return ie(this,void 0,void 0,(function(){var e,n;return oe(this,(function(r){switch(r.label){case 0:if(!jl(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Dl(t){return ie(this,void 0,void 0,(function(){var e,n;return oe(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function kl(t,e){var n=vs(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Vl(n)?Rl(n):$l(n).Hu()&&Cl(n,e))}function Pl(t,e){var n=vs(t),r=$l(n);n.xh.delete(e),r.Hu()&&Ll(n,e),0===n.xh.size&&(r.Hu()?r.Xu():jl(n)&&n.Oh.set("Unknown"))}function Cl(t,e){t.kh.on(e.targetId),$l(t).uh(e)}function Ll(t,e){t.kh.on(e),$l(t).hh(e)}function Rl(t){t.kh=new hc({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),$l(t).start(),t.Oh.Ph()}function Vl(t){return jl(t)&&!$l(t).zu()&&t.xh.size>0}function jl(t){return 0===vs(t).Nh.size}function Ml(t){t.kh=void 0}function Ul(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){return t.xh.forEach((function(e,n){Cl(t,e)})),[2]}))}))}function Fl(t,e){return ie(this,void 0,void 0,(function(){return oe(this,(function(n){return Ml(t),Vl(t)?(t.Oh.Vh(e),Rl(t)):t.Oh.set("Unknown"),[2]}))}))}function ql(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o;return oe(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof cc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o;return oe(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),cs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Bl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof uc?t.kh.dn(e):e instanceof ac?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Cs.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Uh(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(_s.T,n.Ot)),Ll(t,e);var r=new na(n.target,e,1,n.sequenceNumber);Cl(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return cs("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Bl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Bl(t,e,n){return ie(this,void 0,void 0,(function(){var r=this;return oe(this,(function(i){switch(i.label){case 0:if(!$c(e))throw e;return t.Nh.add(1),[4,Dl(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Uh(t.bh)}),t._s.po((function(){return ie(r,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return cs("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Sl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function zl(t,e){return e().catch((function(n){return Bl(t,n,e)}))}function Gl(t){return ie(this,void 0,void 0,(function(){var e,n,r,i,o;return oe(this,(function(s){switch(s.label){case 0:e=vs(t),n=Zl(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return jl(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,qh(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Zl(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Bl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Hl(e)&&Yl(e),[2]}}))}))}function Hl(t){return jl(t)&&!Zl(t).zu()&&t.Ch.length>0}function Yl(t){Zl(t).start()}function Kl(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){return Zl(t).Eh(),[2]}))}))}function Ql(t){return ie(this,void 0,void 0,(function(){var e,n,r,i;return oe(this,(function(o){for(e=Zl(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function Xl(t,e,n){return ie(this,void 0,void 0,(function(){var r,i;return oe(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Pf.from(r,e,n),[4,zl(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,Gl(t)];case 2:return o.sent(),[2]}}))}))}function Wl(t,e){return ie(this,void 0,void 0,(function(){return oe(this,(function(n){switch(n.label){case 0:return e&&Zl(t)._h?[4,function(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return Ua(r=e.code)&&r!==Es.ABORTED?(n=t.Ch.shift(),Zl(t).Yu(),[4,zl(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Gl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Hl(t)&&Yl(t),[2]}}))}))}function Jl(t,e){return ie(this,void 0,void 0,(function(){var n;return oe(this,(function(r){switch(r.label){case 0:return n=vs(t),e?(n.Nh.delete(2),[4,Sl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Dl(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function $l(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=vs(t);return r.Ih(),new Tl(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Ul.bind(null,t),Tu:Fl.bind(null,t),ah:ql.bind(null,t)}),t.$h.push((function(n){return ie(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Vl(t)?Rl(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),Ml(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function Zl(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=vs(t);return r.Ih(),new Al(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Kl.bind(null,t),Tu:Wl.bind(null,t),wh:Ql.bind(null,t),dh:Xl.bind(null,t)}),t.$h.push((function(n){return ie(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Gl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(cs("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */}var tp=function(){this.Kh=void 0,this.listeners=[]},ep=function(){this.queries=new th((function(t){return Ju(t)}),Wu),this.onlineState="Unknown",this.Wh=new Set};function np(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return oe(this,(function(c){switch(c.label){case 0:if(n=vs(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new tp),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return u=c.sent(),a=of(u,"Initialization of query '"+$u(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&sp(n),[2]}}))}))}function rp(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s;return oe(this,(function(u){return n=vs(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function ip(t,e){for(var n=vs(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,f=a.listeners;c<f.length;c++)f[c].zh(s)&&(r=!0);a.Kh=s}}r&&sp(n)}function op(t,e,n){var r=vs(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function sp(t){t.Wh.forEach((function(t){t.next()}))}var up=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ic(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=ic.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),ap=function(t){this.key=t},cp=function(t){this.key=t},fp=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Za(),this.De=Za(),this.hl=ta(t),this.ll=new nc(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new rc,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,u=!1,a=Bu(this.query)&&i.size===this.query.limit?i.last():null,c=zu(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var f=i.get(t),h=e instanceof yu?e:null;h&&(h=Zu(n.query,h)?h:null);var l=!!f&&n.De.has(f.key),p=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),d=!1;f&&h?f.data().isEqual(h.data())?l!==p&&(r.track({type:3,doc:h}),d=!0):n.wl(f,h)||(r.track({type:2,doc:h}),d=!0,(a&&n.hl(h,a)>0||c&&n.hl(h,c)<0)&&(u=!0)):!f&&h?(r.track({type:0,doc:h}),d=!0):f&&!h&&(r.track({type:1,doc:f}),d=!0,(a||c)&&(u=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Bu(this.query)||zu(this.query))for(;s.size>this.query.limit;){var f=Bu(this.query)?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{ll:s,dl:r,lc:u,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ps()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],u=0===this.ul.size&&this.Be?1:0,a=u!==this.al;return this.al=u,0!==o.length||a?{snapshot:new ic(this.query,t.ll,i,o,t.De,0===u,a,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new rc,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Za(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new cp(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new ap(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Za();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return ic.Ne(this.query,this.ll,this.De,0===this.al)},t}(),hp=function(t,e,n){this.query=t,this.targetId=e,this.view=n},lp=function(t){this.key=t,this.Pl=!1},pp=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new th((function(t){return Ju(t)}),Wu),this.Sl=new Map,this.Dl=new Set,this.Cl=new qa(Ms.H),this.xl=new Map,this.Nl=new Xh,this.$l={},this.Fl=new Map,this.Ol=ch.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function dp(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s,u;return oe(this,(function(a){switch(a.label){case 0:return n=zp(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,Bh(n.bh,Qu(e))];case 2:return s=a.sent(),u=n.Vl.Fa(s.targetId),r=s.targetId,[4,vp(n,e,r,"current"===u)];case 3:i=a.sent(),n.Ml&&kl(n.yl,s),a.label=4;case 4:return[2,i]}}))}))}function vp(t,e,n,r){return ie(this,void 0,void 0,(function(){var i,o,s,u,a,c;return oe(this,(function(f){switch(f.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return ie(this,void 0,void 0,(function(){var i,o,s;return oe(this,(function(u){switch(u.label){case 0:return(i=e.view.fl(n)).lc?[4,Gh(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Op(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Gh(t.bh,e,!0)];case 1:return i=f.sent(),o=new fp(e,i.Rc),s=o.fl(i.documents),u=sc.Le(n,r&&"Offline"!==t.onlineState),a=o.wi(s,t.Ml,u),Op(t,n,a.Il),c=new hp(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),a.snapshot)]}}))}))}function yp(t,e){return ie(this,void 0,void 0,(function(){var n,r,i;return oe(this,(function(o){switch(o.label){case 0:return n=vs(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Wu(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,zh(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),Pl(n.yl,r.targetId),xp(n,r.targetId)})).catch(Zf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return xp(n,r.targetId),[4,zh(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function mp(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,s;return oe(this,(function(u){switch(u.label){case 0:r=Gp(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=vs(t),i=Ps.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Za());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],f=Aa(c,n.get(c.key));null!=f&&s.push(new Sa(c.key,f,du(f.proto.mapValue),wa.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=u.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new qa(gs)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,kp(r,i.ri)];case 3:return u.sent(),[4,Gl(r.yl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=of(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function gp(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:n=vs(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Fh(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(ds(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?ds(r.Pl):t.Qe.size>0&&(ds(r.Pl),r.Pl=!1))})),[4,kp(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Zf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function bp(t,e,n){var r=vs(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=vs(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&sp(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function wp(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,s,u,a;return oe(this,(function(c){switch(c.label){case 0:return(r=vs(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new qa(Ms.H)).zt(o,new mu(o,Cs.min())),u=Za().add(o),a=new oc(Cs.min(),new Map,new Ga(gs),s,u),[4,gp(r,a)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),Dp(r),[3,4];case 2:return[4,zh(r.bh,e,!1).then((function(){return xp(r,e,n)})).catch(Zf)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function _p(t,e){return ie(this,void 0,void 0,(function(){var n,r,i;return oe(this,(function(o){switch(o.label){case 0:n=vs(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Mh(n.bh,e)];case 2:return i=o.sent(),Ap(n,r,null),Tp(n,r),n.Vl.Na(r,"acknowledged"),[4,kp(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Zf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ep(t,e,n){return ie(this,void 0,void 0,(function(){var r,i;return oe(this,(function(o){switch(o.label){case 0:r=vs(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=vs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return ds(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),Ap(r,e,n),Tp(r,e),r.Vl.Na(e,"rejected",n),[4,kp(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Zf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ip(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s;return oe(this,(function(u){switch(u.label){case 0:jl((n=vs(t)).yl)||cs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=vs(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=u.sent(),s=of(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Tp(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Ap(t,e,n){var r=vs(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function xp(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Np(t,e)}))}function Np(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Pl(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),Dp(t))}function Op(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ap?(t.Nl.nr(o.key,e),Sp(t,o)):o instanceof cp?(cs("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Np(t,o.key)):ps()}}function Sp(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(cs("SyncEngine","New document in limbo: "+n),t.Dl.add(r),Dp(t))}function Dp(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Ms(Rs.ot(e)),r=t.Ol.next();t.xl.set(r,new lp(n)),t.Cl=t.Cl.zt(n,r),kl(t.yl,new na(Qu(qu(n.path)),r,2,ks.q))}}function kp(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,s;return oe(this,(function(u){switch(u.label){case 0:return r=vs(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,u){s.push(r.Ll(u,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ch.oc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.bl.ah(i),[4,function(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,f;return oe(this,(function(h){switch(h.label){case 0:n=vs(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Kc.forEach(e,(function(e){return Kc.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return Kc.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!$c(r=h.sent()))throw r;return cs("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.fc.get(u),c=a.Ot,f=a.Lt(c),n.fc=n.fc.zt(u,f));return[2]}}))}))}(r.bh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Pp(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return(n=vs(t)).currentUser.isEqual(e)?[3,3]:(cs("SyncEngine","User change. New user:",e.A()),[4,jh(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new Is(Es.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,kp(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Cp(t,e){var n=vs(t),r=n.xl.get(e);if(r&&r.Pl)return Za().add(r.key);var i=Za(),o=n.Sl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.vl.get(a);i=i.Pe(c.view._l)}return i}function Lp(t,e){return ie(this,void 0,void 0,(function(){var n,r,i;return oe(this,(function(o){switch(o.label){case 0:return[4,Gh((n=vs(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Op(n,e.targetId,i.Il),i)]}}))}))}function Rp(t){return ie(this,void 0,void 0,(function(){var e;return oe(this,(function(n){return[2,Yh((e=vs(t)).bh).then((function(t){return kp(e,t)}))]}))}))}function Vp(t,e,n,r){return ie(this,void 0,void 0,(function(){var i,o;return oe(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=vs(t),r=vs(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):Kc.resolve(null)}))}))}((i=vs(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Gl(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ap(i,e,r||null),Tp(i,e),function(t,e){vs(vs(t).zo).xi(e)}(i.bh,e)):ps(),s.label=4;case 4:return[4,kp(i,o)];case 5:return s.sent(),[3,7];case 6:cs("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function jp(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return oe(this,(function(f){switch(f.label){case 0:return zp(n=vs(t)),Gp(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Mp(n,r.it())]);case 1:return i=f.sent(),n.kl=!0,[4,Jl(n.yl,!0)];case 2:for(f.sent(),o=0,s=i;o<s.length;o++)u=s[o],kl(n.yl,u);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?a.push(e):c=c.then((function(){return xp(n,e),zh(n.bh,e,!0)})),Pl(n.yl,e)})),[4,c]);case 4:return f.sent(),[4,Mp(n,a)];case 5:return f.sent(),function(t){var e=vs(t);e.xl.forEach((function(t,n){Pl(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new qa(Ms.H)}(n),n.kl=!1,[4,Jl(n.yl,!1)];case 6:f.sent(),f.label=7;case 7:return[2]}}))}))}function Mp(t,e,n){return ie(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,f,h,l,p,d,v;return oe(this,(function(y){switch(y.label){case 0:n=vs(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Sl.get(u))&&0!==c.length?[4,Bh(n.bh,Qu(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),f=0,h=c,y.label=3;case 3:return f<h.length?(l=h[f],p=n.vl.get(l),[4,Lp(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Hh(n.bh,u)];case 8:return v=y.sent(),[4,Bh(n.bh,v)];case 9:return a=y.sent(),[4,vp(n,Up(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Up(t){return Fu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Fp(t){var e=vs(t);return vs(vs(e.bh).persistence).Uo()}function qp(t,e,n,r){return ie(this,void 0,void 0,(function(){var i,o,s;return oe(this,(function(u){switch(u.label){case 0:return(i=vs(t)).kl?(cs("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Yh(i.bh)];case 3:return o=u.sent(),s=oc.Me(e,"current"===n),[4,kp(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,zh(i.bh,e,!0)];case 6:return u.sent(),xp(i,e,r),[3,8];case 7:ps(),u.label=8;case 8:return[2]}}))}))}function Bp(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,f,h,l;return oe(this,(function(p){switch(p.label){case 0:if(!(r=zp(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(cs("SyncEngine","Adding an already active target "+s),[3,5]):[4,Hh(r.bh,s)]):[3,6];case 2:return u=p.sent(),[4,Bh(r.bh,u)];case 3:return a=p.sent(),[4,vp(r,Up(u),a.targetId,!1)];case 4:p.sent(),kl(r.yl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return oe(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,zh(r.bh,t,!1).then((function(){Pl(r.yl,t),xp(r,t)})).catch(Zf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,h=n,p.label=7;case 7:return f<h.length?(l=h[f],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function zp(t){var e=vs(t);return e.yl.Dh.Lh=gp.bind(null,e),e.yl.Dh.vn=Cp.bind(null,e),e.yl.Dh.Mh=wp.bind(null,e),e.bl.ah=ip.bind(null,e.gl),e.bl.Bl=op.bind(null,e.gl),e}function Gp(t){var e=vs(t);return e.yl.Dh.Bh=_p.bind(null,e),e.yl.Dh.qh=Ep.bind(null,e),e}var Hp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return this.Qt=_l(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Vh(this.persistence,new Lh,t.Jl,this.Qt)},t.prototype.jl=function(t){return new el(rl.ia,this.Qt)},t.prototype.Wl=function(t){return new pl},t.prototype.terminate=function(){return ie(this,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),Yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ne(e,t),e.prototype.initialize=function(e){return ie(this,void 0,void 0,(function(){return oe(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Kh(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Gp(this.Yl._a)];case 4:return n.sent(),[4,Gl(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Vh(this.persistence,new Lh,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new yh(e,t._s)},e.prototype.jl=function(t){var e=kh(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?$f.Ys(this.cacheSizeBytes):$f.ti;return new Oh(this.synchronizeTabs,e,t.clientId,n,t._s,bl(),wl(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new pl},e}(Hp),Kp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ne(e,t),e.prototype.initialize=function(e){return ie(this,void 0,void 0,(function(){var n,r=this;return oe(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof ll?(this.Vl._a={eu:Vp.bind(null,n),nu:qp.bind(null,n),su:Bp.bind(null,n),Uo:Fp.bind(null,n),tu:Rp.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return ie(r,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return[4,jp(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=bl();if(!ll.Kn(e))throw new Is(Es.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kh(t.yu.t,t.yu.persistenceKey);return new ll(e,t._s,n,t.clientId,t.Jl)},e}(Yp),Qp=function(){function t(){}return t.prototype.initialize=function(t,e){return ie(this,void 0,void 0,(function(){var n=this;return oe(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return bp(n._a,t,1)},this.yl.Dh.n_=Pp.bind(null,this._a),[4,Jl(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new ep},t.prototype.Xl=function(t){var e,n=_l(t.yu.t),r=(e=t.yu,new gl(e));return function(t,e,n){return new xl(t,e,n)}(t.credentials,r,n)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return bp(s._a,t,0)},o=vl.Kn()?new vl:new dl,new Ol(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var u=new pp(t,e,n,r,i,o);return s&&(u.kl=!0),u}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return ie(this,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return e=vs(t),cs("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Dl(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),Xp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Wp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Is(Es.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new js(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),Jp=function(t){this._methodName=t},$p=function(t){this.d_=t};
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
function Zp(t,e,n){if(!n)throw new Is(Es.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function td(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Is(Es.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ed(t,e,n,r){if(!0===e&&!0===r)throw new Is(Es.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nd(t){if(!Ms.wt(t))throw new Is(Es.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function rd(t){if(Ms.wt(t))throw new Is(Es.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function id(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ps()}function od(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Is(Es.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=id(t);throw new Is(Es.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function sd(t,e){if(e<=0)throw new Is(Es.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var ud=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Is(Es.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Is(Es.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ed("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ad=new Map,cd=function(){function t(t,e){this.w_="(lite)",this.E_=new ud({}),this.T_=!1,t instanceof ss?(this.I_=t,this.m_=new Ns):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Is(Es.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(t.options.projectId)}(t),this.m_=new Os(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Is(Es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Is(Es.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new ud(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Ns;switch(t.type){case"gapi":var e=t.client;return ds(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ds(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Is(Es.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=ad.get(this))&&(cs("ComponentProvider","Removing Datastore"),ad.delete(this),t.terminate()),Promise.resolve();var t},t}(),fd=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ld(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),hd=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),ld=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,qu(r))||this).firestore=e,i.D_=r,i.type="collection",i}return ne(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new fd(this.firestore,null,new Ms(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(hd);
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function pd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $p&&(t=t.d_),Zp("collection","path",e),t instanceof cd)return rd(n=Rs.ot.apply(Rs,ce([e],r))),new ld(t,null,n);if(!(t instanceof fd||t instanceof ld))throw new Is(Es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rd(n=Rs.ot.apply(Rs,ce([t.path],r)).child(Rs.ot(e))),new ld(t.firestore,null,n)}function dd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $p&&(t=t.d_),1===arguments.length&&(e=ms.u()),Zp("doc","path",e),t instanceof cd)return nd(n=Rs.ot.apply(Rs,ce([e],r))),new fd(t,null,new Ms(n));if(!(t instanceof fd||t instanceof ld))throw new Is(Es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nd(n=t.D_.child(Rs.ot.apply(Rs,ce([e],r)))),new fd(t.firestore,t instanceof ld?t.v_:null,new Ms(n))}function vd(t,e){return t instanceof $p&&(t=t.d_),e instanceof $p&&(e=e.d_),(t instanceof fd||t instanceof ld)&&(e instanceof fd||e instanceof ld)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function yd(t,e){return t instanceof $p&&(t=t.d_),e instanceof $p&&(e=e.d_),t instanceof hd&&e instanceof hd&&t.firestore===e.firestore&&Wu(t.C_,e.C_)&&t.v_===e.v_
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */}var md=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Is(Es.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Is(Es.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return gs(this.x_,t.x_)||gs(this.N_,t.N_)},t}(),gd=/^__.*__$/,bd=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Sa(t,this.data,this.Gt,e,this.fieldTransforms):new Oa(t,this.data,e,this.fieldTransforms)},t}(),wd=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Sa(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function _d(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ps()}}var Ed=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Bd(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(_d(this.k_)&&gd.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Id=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||_l(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ed({k_:t,methodName:e,j_:n,path:js.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Td(t){var e=t.p_(),n=_l(t.I_);return new Id(t.I_,!!e.ignoreUndefinedProperties,n)}function Ad(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Md("Data must be an object, but it was:",s,r);var u,a,c=Vd(r,s);if(o.merge)u=new Bs(s.Gt),a=s.fieldTransforms;else if(o.mergeFields){for(var f=[],h=0,l=o.mergeFields;h<l.length;h++){var p=Ud(e,l[h],n);if(!s.contains(p))throw new Is(Es.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");zd(f,p)||f.push(p)}u=new Bs(f),a=s.fieldTransforms.filter((function(t){return u.Tt(t.field)}))}else u=null,a=s.fieldTransforms;return new bd(new lu(c),u,a)}var xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jp);function Nd(t,e,n){return new Ed({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.z_=function(t){return new ga(t.path,new fa)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jp),Sd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return ne(e,t),e.prototype.z_=function(t){var e=Nd(this,t,!0),n=this.H_.map((function(t){return Rd(t,e)})),r=new ha(n);return new ga(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jp),Dd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return ne(e,t),e.prototype.z_=function(t){var e=Nd(this,t,!0),n=this.H_.map((function(t){return Rd(t,e)})),r=new pa(n);return new ga(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jp),kd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return ne(e,t),e.prototype.z_=function(t){var e=new va(t.Qt,oa(t.Qt,this.J_));return new ga(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Jp);function Pd(t,e,n,r){var i=t.G_(1,e,n);Md("Data must be an object, but it was:",i,r);var o=[],s=new pu;Fs(r,(function(t,r){var u=qd(e,t,n);r instanceof $p&&(r=r.d_);var a=i.U_(u);if(r instanceof xd)o.push(u);else{var c=Rd(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Bs(o);return new wd(s.Pt(),u,i.fieldTransforms)}function Cd(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[Ud(e,r,n)],a=[i];if(o.length%2!=0)throw new Is(Es.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Ud(e,o[c])),a.push(o[c+1]);for(var f=[],h=new pu,l=u.length-1;l>=0;--l)if(!zd(f,u[l])){var p=u[l],d=a[l];d instanceof $p&&(d=d.d_);var v=s.U_(p);if(d instanceof xd)f.push(p);else{var y=Rd(d,v);null!=y&&(f.push(p),h.set(p,y))}}var m=new Bs(f);return new wd(h.Pt(),m,s.fieldTransforms)}function Ld(t,e,n,r){return void 0===r&&(r=!1),Rd(n,t.G_(r?4:3,e))}function Rd(t,e){if(t instanceof $p&&(t=t.d_),jd(t))return Md("Unsupported field value:",e,t),Vd(t,e);if(t instanceof Jp)return function(t,e){if(!_d(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Rd(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof $p&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oa(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ps.fromDate(t);return{timestampValue:mc(e.Qt,n)}}if(t instanceof Ps)return n=new Ps(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:mc(e.Qt,n)};if(t instanceof md)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ts)return{bytesValue:gc(e.Qt,t.I)};if(t instanceof fd){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:_c(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+id(t))}(t,e)}function Vd(t,e){var n={};return qs(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Fs(t,(function(t,r){var i=Rd(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function jd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ps||t instanceof md||t instanceof Ts||t instanceof fd||t instanceof Jp)}function Md(t,e,n){if(!jd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=id(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Ud(t,e,n){if(e instanceof $p&&(e=e.d_),e instanceof Wp)return e.f_;if("string"==typeof e)return qd(t,e);throw Bd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Fd=new RegExp("[~\\*/\\[\\]]");function qd(t,e,n){if(e.search(Fd)>=0)throw Bd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Wp.bind.apply(Wp,ce([void 0],e.split("."))))).f_}catch(r){throw Bd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Bd(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Is(Es.INVALID_ARGUMENT,(u+=". ")+t+a)}function zd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Gd=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return ie(this,void 0,void 0,(function(){var e,n=this;return oe(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Is(Es.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,s,u;return oe(this,(function(a){switch(a.label){case 0:return n=vs(t),r=Nc(n.Qt)+"/documents",i={documents:e.map((function(t){return Ic(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ds(!!e.found),e.found.name,e.found.updateTime;var n=Tc(t,e.found.name),r=wc(e.found.updateTime),i=new lu({mapValue:{fields:e.found.fields}});return new yu(n,r,i,{})}(t,e):"missing"in e?function(t,e){ds(!!e.missing),ds(!!e.readTime);var n=Tc(t,e.missing),r=wc(e.readTime);return new mu(n,r)}(t,e):ps()}(n.Qt,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ds(!!e),u.push(e)})),u)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof mu||t instanceof yu?n.sf(t):ps()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Va(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return ie(this,void 0,void 0,(function(){var t,e=this;return oe(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ms._t(n);e.mutations.push(new ja(r,e.jt(r)))})),[4,function(t,e){return ie(this,void 0,void 0,(function(){var n,r,i;return oe(this,(function(o){switch(o.label){case 0:return n=vs(t),r=Nc(n.Qt)+"/documents",i={writes:e.map((function(t){return Dc(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof yu)e=t.version;else{if(!(t instanceof mu))throw ps();e=Cs.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Is(Es.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?wa.updateTime(e):wa.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Cs.min()))throw new Is(Es.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wa.updateTime(e)}return wa.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Hd=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new El(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return ie(t,void 0,void 0,(function(){var t,e,n=this;return oe(this,(function(r){return t=new Gd(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ws(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ua(e)}return!1},t}(),Yd=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=As.UNAUTHENTICATED,this.clientId=ms.u(),this._f=function(){},this.C=new Yc,this.credentials.v((function(t){cs("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return ie(this,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Is(Es.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Yc;return this._s.Tf((function(){return ie(t,void 0,void 0,(function(){var t,n;return oe(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=of(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Kd(t,e){return ie(this,void 0,void 0,(function(){var n,r,i=this;return oe(this,(function(o){switch(o.label){case 0:return t._s.Af(),cs("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return ie(i,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return[4,jh(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Qd(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Xd(t)];case 1:return n=i.sent(),cs("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return(n=vs(t))._s.Af(),cs("RemoteStore","RemoteStore received new credentials"),r=jl(n),n.Nh.add(3),[4,Dl(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Sl(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Xd(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(cs("FirestoreClient","Using default OfflineComponentProvider"),[4,Kd(t,new Hp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Wd(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(cs("FirestoreClient","Using default OnlineComponentProvider"),[4,Qd(t,new Qp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Jd(t){return Xd(t).then((function(t){return t.persistence}))}function $d(t){return Xd(t).then((function(t){return t.bh}))}function Zd(t){return Wd(t).then((function(t){return t.yl}))}function tv(t){return Wd(t).then((function(t){return t._a}))}function ev(t){return ie(this,void 0,void 0,(function(){var e,n;return oe(this,(function(r){switch(r.label){case 0:return[4,Wd(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=dp.bind(null,e._a),n.Hh=yp.bind(null,e._a),n)]}}))}))}function nv(t,e,n){var r=this;void 0===n&&(n={});var i=new Yc;return t._s.Ps((function(){return ie(r,void 0,void 0,(function(){var r;return oe(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xp({next:function(o){e.Ps((function(){return rp(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Is(Es.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Is(Es.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new up(qu(n.path),o,{includeMetadataChanges:!0,nl:!0});return np(t,s)},[4,ev(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function rv(t,e,n){var r=this;void 0===n&&(n={});var i=new Yc;return t._s.Ps((function(){return ie(r,void 0,void 0,(function(){var r;return oe(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xp({next:function(n){e.Ps((function(){return rp(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Is(Es.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new up(n,o,{includeMetadataChanges:!0,nl:!0});return np(t,s)},[4,ev(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var iv=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new El(this,"async_queue_retry"),this.vf=function(){var e=wl();e&&cs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=wl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=wl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return ie(this,void 0,void 0,(function(){var t,e=this;return oe(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!$c(t=n.sent()))throw t;return cs("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,fs("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=rf.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ps()},t.prototype.Af=function(){},t.prototype.Nf=function(){return ie(this,void 0,void 0,(function(){var t;return oe(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function ov(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var sv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new iv,r.w_="name"in e?e.name:"[DEFAULT]",r}return ne(e,t),e.prototype.b_=function(){return this.qf||av(this),this.qf.terminate()},e}(cd);
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function uv(t){return t.qf||av(t),t.qf.df(),t.qf}function av(t){var e=t.p_(),n=function(t,e,n){return new os(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Yd(t.m_,t.Bf,n)}function cv(t,e,n){var r=this,i=new Yc;return t._s.enqueue((function(){return ie(r,void 0,void 0,(function(){var r;return oe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Kd(t,n)];case 1:return o.sent(),[4,Qd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Es.FAILED_PRECONDITION||t.code===Es.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function fv(t){if(t.R_||t.P_)throw new Is(Es.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var hv=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Zs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hs(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Ys(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw ps()}},t.prototype.Hf=function(t,e){var n=this,r={};return Fs(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new md(Hs(t.latitude),Hs(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Qs(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Xs(t));default:return null}},t.prototype.Qf=function(t){var e=Gs(t);return new Ps(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Rs.ot(t);ds(Hc(n));var r=new ss(n.get(1),n.get(3)),i=new Ms(n.Y(5));return r.isEqual(e)||fs("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),lv=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new fd(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new pv(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(dv("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lv);
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function dv(t,e){return"string"==typeof e?qd(t,e):e instanceof $p?e.d_.f_:e.f_}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function vv(t){if(zu(t)&&0===t.xt.length)throw new Is(Es.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yv=function(){};function mv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var gv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return ne(e,t),e.prototype.td=function(t){var e=Td(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Is(Es.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Av(s,o);for(var a=[],c=0,f=s;c<f.length;c++){var h=f[c];a.push(Tv(r,t,h))}u={arrayValue:{values:a}}}else u=Tv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Av(s,o),u=Ld(n,"where",s,"in"===o||"not-in"===o);var l=Tu.create(i,o,u);return function(t,e){if(e.Ct()){var n=Hu(t);if(null!==n&&!n.isEqual(e.field))throw new Is(Es.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Gu(t);null!==r&&xv(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Is(Es.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Is(Es.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new hd(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Uu(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(yv),bv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return ne(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Is(Es.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Is(Es.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ru(e,n);return function(t,e){if(null===Gu(t)){var n=Hu(t);null!==n&&xv(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new hd(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Uu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(yv),wv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return ne(e,t),e.prototype.td=function(t){return new hd(t.firestore,t.v_,Xu(t.C_,this.od,this.ad))},e}(yv),_v=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return ne(e,t),e.prototype.td=function(t){var e=Iv(t,this.type,this.ud,this.hd);return new hd(t.firestore,t.v_,function(t,e){return new Uu(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(yv),Ev=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return ne(e,t),e.prototype.td=function(t){var e=Iv(t,this.type,this.ud,this.hd);return new hd(t.firestore,t.v_,function(t,e){return new Uu(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(yv);function Iv(t,e,n,r){if(n[0]instanceof $p&&(n[0]=n[0].d_),n[0]instanceof lv)return function(t,e,n,r,i){if(!r)throw new Is(Es.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Ku(t);s<u.length;s++){var a=u[s];if(a.field.ut())o.push(su(e,r.key));else{var c=r.field(a.field);if(Ks(c))throw new Is(Es.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=a.field.rt();throw new Is(Es.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Cu(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Td(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Is(Es.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ut()){if("string"!=typeof c)throw new Is(Es.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Yu(t)&&-1!==c.indexOf("/"))throw new Is(Es.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var f=t.path.child(Rs.ot(c));if(!Ms.wt(f))throw new Is(Es.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var h=new Ms(f);u.push(su(e,h))}else{var l=Ld(n,r,c);u.push(l)}}return new Cu(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Tv(t,e,n){if(n instanceof $p&&(n=n.d_),"string"==typeof n){if(""===n)throw new Is(Es.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yu(e)&&-1!==n.indexOf("/"))throw new Is(Es.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Rs.ot(n));if(!Ms.wt(r))throw new Is(Es.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return su(t,new Ms(r))}if(n instanceof fd)return su(t,n.S_);throw new Is(Es.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+id(n)+".")}function Av(t,e){if(!Array.isArray(t)||0===t.length)throw new Is(Es.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Is(Es.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function xv(t,e,n){if(!n.isEqual(e))throw new Is(Es.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Nv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ov=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ne(e,t),e.prototype.Wf=function(t){return new Ts(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new fd(this.firestore,null,e)},e}(hv),Sv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Dv=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).Yf=e,u.ld=e,u.metadata=o,u}return ne(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new kv(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(dv("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(lv),kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Dv),Pv=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Sv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new kv(n.Yf,n.Xf,r.key,r,new Sv(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Is(Es.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new kv(t.Yf,t.Xf,e.doc.key,e.doc,new Sv(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new kv(t.Yf,t.Xf,e.doc.key,e.doc,new Sv(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function Cv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ps()}}function Lv(t,e){return t instanceof Dv&&e instanceof Dv?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Pv&&e instanceof Pv&&t.Yf===e.Yf&&yd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Rv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ne(e,t),e.prototype.Wf=function(t){return new Ts(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new fd(this.firestore,null,e)},e}(hv);function Vv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=od(t,fd);var o=od(t.firestore,sv),s=Td(o);return e instanceof $p&&(e=e.d_),Mv(o,[("string"==typeof e||e instanceof Wp?Cd(s,"updateDoc",t.S_,e,n,r):Pd(s,"updateDoc",t.S_,e)).F_(t.S_,wa.exists(!0))])}function jv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof $p&&(t=t.d_);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||ov(i[u])||(s=i[u],u++);var a,c,f,h={includeMetadataChanges:s.includeMetadataChanges};if(ov(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof fd)c=od(t.firestore,sv),f=qu(t.S_.path),a={next:function(e){i[u]&&i[u](Uv(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=od(t,hd);c=od(p.firestore,sv),f=p.C_;var d=new Rv(c);a={next:function(t){i[u]&&i[u](new Pv(c,d,p,t))},error:i[u+1],complete:i[u+2]},vv(t.C_)}return function(t,e,n,r){var i=this,o=new Xp(r),s=new up(e,o,n);return t._s.Ps((function(){return ie(i,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return e=np,[4,ev(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return ie(i,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return e=rp,[4,ev(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(uv(c),f,h,a)}function Mv(t,e){return function(t,e){var n=this,r=new Yc;return t._s.Ps((function(){return ie(n,void 0,void 0,(function(){var n;return oe(this,(function(i){switch(i.label){case 0:return n=mp,[4,tv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(uv(t),e)}function Uv(t,e,n){var r=n.docs.get(e.S_),i=new Rv(t);return new Dv(t,i,e.S_,r,new Sv(n.hasPendingWrites,n.fromCache),e.v_)}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Fv=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Td(t)}return t.prototype.set=function(t,e,n){this.md();var r=qv(t,this.Yf),i=Nv(r.v_,e,n),o=Ad(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,wa.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=qv(t,this.Yf);return e instanceof $p&&(e=e.d_),o="string"==typeof e||e instanceof Wp?Cd(this.Id,"WriteBatch.update",s.S_,e,n,r):Pd(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,wa.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=qv(t,this.Yf);return this.Ed=this.Ed.concat(new Va(e.S_,wa.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Is(Es.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function qv(t,e){if(t instanceof $p&&(t=t.d_),t.firestore!==e)throw new Is(Es.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var Bv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return ne(e,t),e.prototype.get=function(e){var n=this,r=qv(e,this.Yf),i=new Rv(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new Dv(n.Yf,i,r.S_,t.Zf,new Sv(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Td(t)}return t.prototype.get=function(t){var e=this,n=qv(t,this.Yf),r=new Ov(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ps();var i=t[0];if(i instanceof mu)return new lv(e.Yf,r,n.S_,null,n.v_);if(i instanceof yu)return new lv(e.Yf,r,i.key,i,n.v_);throw ps()}))},t.prototype.set=function(t,e,n){var r=qv(t,this.Yf),i=Nv(r.v_,e,n),o=Ad(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=qv(t,this.Yf);return e instanceof $p&&(e=e.d_),o="string"==typeof e||e instanceof Wp?Cd(this.Id,"Transaction.update",s.S_,e,n,r):Pd(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=qv(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function zv(){if("undefined"==typeof Uint8Array)throw new Is(Es.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Gv(){if("undefined"==typeof atob)throw new Is(Es.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.fromBase64String=function(t){return Gv(),new e(Ts.fromBase64String(t))},e.fromUint8Array=function(t){return zv(),new e(Ts.fromUint8Array(t))},e.prototype.toBase64=function(){return Gv(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return zv(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}($p),Yv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fv(t=od(t,sv));var n=uv(t),r=t.p_(),i=new Qp;return cv(n,i,new Yp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fv(t=od(t,sv));var e=uv(t),n=t.p_(),r=new Qp;return cv(e,r,new Kp(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Is(Es.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Yc;return t.Bf.Tf((function(){return ie(e,void 0,void 0,(function(){var e;return oe(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ie(this,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return Xc.Kn()?(e=t+"main",[4,Xc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(kh(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof ss||(i.Pd=e),i}return ne(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=od(t,cd)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&hs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return ie(e,void 0,void 0,(function(){var e,n;return oe(this,(function(r){switch(r.label){case 0:return[4,Jd(t)];case 1:return e=r.sent(),[4,Zd(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=vs(t);return e.Nh.delete(0),Sl(e)}(n))]}}))}))}))}(uv(od(this.d_,sv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return ie(e,void 0,void 0,(function(){var e,n;return oe(this,(function(r){switch(r.label){case 0:return[4,Jd(t)];case 1:return e=r.sent(),[4,Zd(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return ie(this,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return(e=vs(t)).Nh.add(0),[4,Dl(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(uv(od(this.d_,sv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ed("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Yc;return t._s.Ps((function(){return ie(e,void 0,void 0,(function(){var e;return oe(this,(function(r){switch(r.label){case 0:return e=Ip,[4,tv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(uv(od(this.d_,sv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Xp(e);return t._s.Ps((function(){return ie(n,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return e=function(t,e){vs(t).Wh.add(e),e.next()},[4,ev(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return ie(n,void 0,void 0,(function(){var e;return oe(this,(function(n){switch(n.label){case 0:return e=function(t,e){vs(t).Wh.delete(e)},[4,ev(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(uv(t=od(t,sv)),ov(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Is(Es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new uy(this,pd(this.d_,t))}catch(t){throw Zv(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new $v(this,dd(this.d_,t))}catch(t){throw Zv(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new iy(this,function(t,e){if(t=od(t,cd),Zp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Is(Es.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new hd(t,null,function(t){return new Uu(Rs.ct(),t)}(e))}(this.d_,t))}catch(t){throw Zv(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Yc;return t._s.Ps((function(){return ie(n,void 0,void 0,(function(){var n;return oe(this,(function(i){switch(i.label){case 0:return[4,function(t){return Wd(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new Hd(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(uv(t),(function(n){return e(new Bv(t,n))}))}(this.d_,(function(n){return t(new Xv(e,n))}))},e.prototype.batch=function(){var t=this;return uv(this.d_),new Wv(new Fv(this.d_,(function(e){return Mv(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Is(Es.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Is(Es.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}($p),Qv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ne(e,t),e.prototype.Wf=function(t){return new Hv(new Ts(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return $v.yd(e,this.firestore,null)},e}(hv);var Xv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Qv(e),r}return ne(e,t),e.prototype.get=function(t){var e=this,n=ay(t);return this.d_.get(n).then((function(t){return new ny(e.Yf,new Dv(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=ay(t);return n?(td("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ay(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,ce([s,e,n],i)),this},e.prototype.delete=function(t){var e=ay(t);return this.d_.delete(e),this},e}($p),Wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.set=function(t,e,n){var r=ay(t);return n?(td("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ay(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,ce([s,e,n],i)),this},e.prototype.delete=function(t){var e=ay(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}($p),Jv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return ne(e,t),e.prototype.fromFirestore=function(t,e){var n=new kv(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new ry(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Qv(t),n),i.set(n,o)),o},e}($p);Jv.Vd=new WeakMap;var $v=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Qv(e),r}return ne(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Is(Es.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new fd(n.d_,r,new Ms(t)))},e.yd=function(t,n,r){return new e(n,new fd(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new uy(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new uy(this.firestore,pd(this.d_,t))}catch(t){throw Zv(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof $p&&(t=t.d_),t instanceof fd&&vd(this.d_,t)},e.prototype.set=function(t,e){e=td("DocumentReference.set",e);try{return function(t,e,n){t=od(t,fd);var r=od(t.firestore,sv),i=Nv(t.v_,e,n);return Mv(r,[Ad(Td(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,wa.Kt())])}(this.d_,t,e)}catch(t){throw Zv(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Vv(this.d_,t):Vv.apply(void 0,ce([this.d_,t,e],n))}catch(t){throw Zv(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Mv(od((t=this.d_).firestore,sv),[new Va(t.S_,wa.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ty(e),i=ey(e,(function(e){return new ny(t.firestore,new Dv(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return jv(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=od(t,fd);var e=od(t.firestore,sv),n=uv(e),r=new Rv(e);return function(t,e){var n=this,r=new Yc;return t._s.Ps((function(){return ie(n,void 0,void 0,(function(){var n;return oe(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ie(this,void 0,void 0,(function(){var r,i;return oe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=vs(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof yu?n.resolve(i):i instanceof mu?n.resolve(null):n.reject(new Is(Es.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=of(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,$d(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Dv(e,r,t.S_,n,new Sv(n instanceof yu&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=od(t,fd);var e=od(t.firestore,sv);return nv(uv(e),t.S_,{source:"server"}).then((function(n){return Uv(e,t,n)}))}(this.d_):function(t){t=od(t,fd);var e=od(t.firestore,sv);return nv(uv(e),t.S_).then((function(n){return Uv(e,t,n)}))}(this.d_)).then((function(t){return new ny(e.firestore,new Dv(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Jv.gd(this.firestore,t)))},e}($p);function Zv(t,e,n){return t.message=t.message.replace(e,n),t}function ty(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ov(r))return r}return{}}function ey(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ov(t[0])?t[0]:ov(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ny=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return ne(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new $v(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Lv(this.d_,t.d_)},e}($p),ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(ny),iy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Qv(e),r}return ne(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,mv(this.d_,function(t,e,n){var r=e,i=dv("where",t);return new gv(i,r,n)}(t,n,r)))}catch(t){throw Zv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,mv(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=dv("orderBy",t);return new bv(r,n)}(t,n)))}catch(t){throw Zv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,mv(this.d_,function(t){return sd("limit",t),new wv("limit",t,"F")}(t)))}catch(t){throw Zv(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,mv(this.d_,function(t){return sd("limitToLast",t),new wv("limitToLast",t,"L")}(t)))}catch(t){throw Zv(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _v("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Zv(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _v("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Zv(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ev("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Zv(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,mv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ev("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Zv(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return yd(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=od(t,hd);var e=od(t.firestore,sv),n=uv(e),r=new Rv(e);return function(t,e){var n=this,r=new Yc;return t._s.Ps((function(){return ie(n,void 0,void 0,(function(){var n;return oe(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,s,u;return oe(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Gh(t,e,!0)];case 1:return u=a.sent(),r=new fp(e,u.Rc),i=r.fl(u.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=of(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,$d(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Pv(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=od(t,hd);var e=od(t.firestore,sv),n=uv(e),r=new Rv(e);return rv(n,t.C_,{source:"server"}).then((function(n){return new Pv(e,r,t,n)}))}(this.d_):function(t){t=od(t,hd);var e=od(t.firestore,sv),n=uv(e),r=new Rv(e);return vv(t.C_),rv(n,t.C_).then((function(n){return new Pv(e,r,t,n)}))}(this.d_)).then((function(t){return new sy(e.firestore,new Pv(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ty(e),i=ey(e,(function(e){return new sy(t.firestore,new Pv(t.firestore.d_,t.Xf,t.d_,e._d))}));return jv(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Jv.gd(this.firestore,t)))},e}($p),oy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return ne(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ry(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}($p),sy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return ne(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new iy(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new ry(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new oy(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new ry(n.Yf,r))}))},e.prototype.isEqual=function(t){return Lv(this.d_,t.d_)},e}($p),uy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return ne(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new $v(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new $v(this.firestore,void 0===t?dd(this.d_):dd(this.d_,t))}catch(t){throw Zv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=od(t.firestore,sv),r=dd(t),i=Nv(t.v_,e);return Mv(n,[Ad(Td(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,wa.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new $v(e.firestore,t)}))},e.prototype.isEqual=function(t){return vd(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Jv.gd(this.firestore,t)))},e}(iy);function ay(t){return t instanceof $p&&(t=t.d_),od(t,fd)}
/**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */var cy,fy=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Wp.bind.apply(Wp,ce([void 0],e))))||this}return ne(e,t),e.documentId=function(){return new e(js.ht().rt())},e.prototype.isEqual=function(t){return t instanceof $p&&(t=t.d_),t instanceof Wp&&this.d_.f_.isEqual(t.f_)},e}($p),hy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ne(e,t),e.serverTimestamp=function(){var t=new Od("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new xd("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sd("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dd("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new kd("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}($p),ly={Firestore:Kv,GeoPoint:md,Timestamp:Ps,Blob:Hv,Transaction:Xv,WriteBatch:Wv,DocumentReference:$v,DocumentSnapshot:ny,Query:iy,QueryDocumentSnapshot:ry,QuerySnapshot:sy,CollectionReference:uy,FieldPath:fy,FieldValue:hy,setLogLevel:function(t){var e;e=t,us.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Ee("firestore",(function(t){return function(t,e){return new Kv(t,new sv(t,e),new Yv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},ly)))})(cy=We),cy.registerVersion("@firebase/firestore","2.1.6");const py=async()=>{const t=document.querySelectorAll(".currentSite__titel");if(zt(t))for(const e of t)e.innerText=dy(await Qt())},dy=t=>t.replace(/^(https?:\/\/)?(www\.)?/,""),vy=async()=>{let t=await yy(await Qt());if(zt(t)&&t.length>0)for(const e of t)new te(e.patternTopic,e.patternDescription)},yy=t=>new Promise((async(e,n)=>{try{return e((await We.firestore().collection(t).get()).docs.map((t=>t.data())))}catch(t){return n(t)}})),my=async()=>{const t=document.querySelectorAll(".switch");if(zt(t))for(const e of t)e.checked=await Kt(e),e.addEventListener("click",(function(){Gt(this)}))},gy=()=>{const t=document.getElementById("report__form");zt(t)&&t.addEventListener("submit",(function(t){t.preventDefault();let e=new FormData(this);Ey(_y(e)),wy()}))},by=()=>{const t=document.querySelectorAll(".form__text-field"),e=document.getElementById("report__submit"),n=document.getElementById("report__topic__input"),r=document.getElementById("report__solution__input"),i=document.getElementById("text__counter-textarea"),o=document.getElementById("text__counter-input");if(zt(t))for(const s of t)s.addEventListener("keyup",(function(){Ht(this),null==n.value||""==n.value||null==r.value||""==r.value||i.classList.contains("warning")||o.classList.contains("warning")?e.disabled=!0:e.disabled=!1}))},wy=()=>{const t=document.getElementById("report__topic__input");zt(t)&&(t.value="",Ht(t));const e=document.getElementById("report__solution__input");zt(e)&&(e.value="",Ht(e));const n=document.getElementById("report__submit");zt(n)&&(n.disabled=!0)},_y=t=>{let e={};for(let[n,r]of t)e[n]=r;return e},Ey=async t=>{let e=String(await(async()=>new Promise((async(t,e)=>{try{chrome.storage.local.get(["currentDomain"],(e=>t(e.currentDomain)))}catch(t){return console.log(t),e(void 0)}})))());t.siteName=e,await We.firestore().collection(e).add(t).then((t=>{Xt("Du hast den Dark Pattern erfolgreich mit der Community geteilt. Vielen Dank!","success")})).catch((t=>{Xt(`Es ist ein Fehler aufgetreten: ${t}`,"error")}))},Iy=()=>{const t=document.querySelectorAll(".navigation__item");if(zt(t)){Ty(t[0]);for(const e of t)e.addEventListener("click",(function(){Ay(this),Wt(this,"active")}))}},Ty=t=>{Ay(t),Wt(t,"active")},Ay=t=>{"item-audit"===t.getAttribute("id")?xy("audit"):"item-report"===t.getAttribute("id")?xy("report"):"item-setting"===t.getAttribute("id")&&xy("setting")},xy=async t=>{const e=document.getElementById("midContainer");if(zt(e))try{const n=await fetch("../interfaces/"+t+".html");if(!n.ok)throw new Error(n.statusText);const r=await n.text();e.innerHTML=r,await new Promise((async t=>{const e=document.querySelectorAll("[data-translate]");if(zt(e))try{const n=await fetch("../languages/lang_DE.json");if(!n.ok)throw new Error(n.statusText);const r=await n.json();for(const t of e)zt(r[t.getAttribute("data-translate")])&&(t.hasAttribute("data-tooltip")?Bt(t,{content:r[t.getAttribute("data-translate")],animation:"scale",allowHTML:!0,delay:[400,null]}):t.hasAttribute("placeholder")?t.setAttribute("placeholder",r[t.getAttribute("data-translate")]):t.hasAttribute("value")?t.setAttribute("value",r[t.getAttribute("data-translate")]):t.innerHTML=r[t.getAttribute("data-translate")]);t()}catch(t){console.log(t)}})),"audit"==t?(async()=>{py(),await Kt("switch__community")&&vy(),new $t(2),new Zt(4)})():"report"==t?(gy(),by()):"setting"==t&&my()}catch(t){console.log(t)}};window.onload=async()=>{await Oy(),Ny()};const Ny=()=>{Iy(),(()=>{const t=document.getElementById("icon-close");zt(t)&&t.addEventListener("click",(()=>{window.close()}))})()},Oy=async()=>new Promise((async t=>{await We.initializeApp({apiKey:"AIzaSyBBkXKnek1w_jSCNUwA-FzJOWDGTkmwRv8",authDomain:"dark-pattern.firebaseapp.com",projectId:"dark-pattern",storageBucket:"dark-pattern.appspot.com",messagingSenderId:"433737509940",appId:"1:433737509940:web:a2ec318aab367de274ee61",measurementId:"G-TYQ3HRTVY9"}),console.log("Firebase Init done!"),t()}))}();